(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-150633bc"],{"372d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:!0,expression:"true",modifiers:{lock:!0}}],staticClass:"my-loading",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}})},r=[],i={},s=i,l=(a("ee47"),a("2877")),o=Object(l["a"])(s,n,r,!1,null,"6c517b7e",null),c=o.exports;a.d(e,"a",function(){return u});var u=function(t){return function(){return{component:t,loading:c,delay:0}}}},"9ade":function(t,e,a){},"9f9e":function(t,e,a){},af6f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-bar",{attrs:{list:t.nav}}),a("section",{staticClass:"progress-header"},[a("el-row",{attrs:{justify:"center"}},[a("el-col",{attrs:{align:"center",span:12,offset:6}},[a("span",{staticClass:"text_22_blod"},[t._v(t._s(t.name))]),a("br"),a("span",{staticClass:"text_16"},[t._v(t._s(t.department))])]),a("el-col",{attrs:{align:"center",span:6}},[a("el-button",{attrs:{disabled:!t.Allsubmit_action,type:"primary"},on:{click:t.Allsubmit_step1}},[t._v("同意")]),a("el-popover",{attrs:{placement:"bottom",width:"370",trigger:"click"}},[a("p",[t._v("提交记录")]),[a("el-table",{attrs:{data:t.reviewData,height:"400"}},[a("el-table-column",{attrs:{width:"170",property:"created_at",label:"日期"}}),a("el-table-column",{attrs:{width:"100",property:"name",label:"姓名"}}),a("el-table-column",{attrs:{width:"100",property:"type_text",label:"状态"}})],1)],a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference"},on:{click:function(e){return t.hight_level_team_reviewList()}},slot:"reference"},[t._v("查看审批记录")])],2)],1)],1),t.reject_msg?a("el-row",{staticClass:"overview_tip_color"},[a("el-col",{attrs:{span:2,align:"center"}},[a("p",[t._v("上级意见:")])]),a("el-col",{attrs:{span:22,align:"left"}},[a("p",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.reject_msg))])])],1):t._e()],1),a("section",{staticClass:"content-container"},[a("team-tabel",{attrs:{overview:t.overview}}),a("section",{staticClass:"progress-header"},[a("el-row",{staticClass:"table-title",attrs:{gutter:20}},[a("el-col",{staticClass:"table-title-desc",attrs:{span:2.5}},[t._v("考核人员明细")]),a("el-col",{staticClass:"table-title-num",attrs:{span:15}},[t._v("共"+t._s(t.total)+"人")])],1),a("el-form",{ref:"filterForm",attrs:{inline:!0,model:t.filterForm}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.filterForm.name,callback:function(e){t.$set(t.filterForm,"name",e)},expression:"filterForm.name"}})],1),a("el-form-item",{attrs:{prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.filterForm.status,callback:function(e){t.$set(t.filterForm,"status",e)},expression:"filterForm.status"}},t._l(t.constants.ENUM_PERFORMANCE_FINISH,function(t){return a("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})}),1)],1),t._e(),a("el-button",{on:{click:function(e){return t.resetForm("filterForm")}}},[t._v(t._s(t.constants.LABEL_EMPTY))])],1)],1),a("high-level-list",{ref:"high_level_list",attrs:{list_data:t.tableData,department_id:t.department_id,total:t.total,team_overview:t.team_overview},on:{get_workcode:t.get_workcode,reload:t.reload}}),a("br"),a("pagination",{attrs:{currentPage:t.currentPage,total:t.total,pageSize:t.perPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("br")],1)],1)},r=[],i=(a("7f7f"),a("38fb")),s=a("c9f1"),l=a("372d"),o=a("fea5"),c={inject:["page_reload"],data:function(){return{total:0,currentPage:1,filterForm:{status:"",name:"",tags:""},overview:[],nav:[{label:i["Vc"],href:s["j"]},{label:i["Nb"],active:!0}],tableData:[],constants:{DETAILS:i["W"],SELF_EVALUATION:i["ce"],LABEL_NAME:i["oc"],LABEL_SUP:i["Ec"],OPERATIONS:i["yd"],APPEAL:i["g"],LABEL_EMPTY:i["ic"],PLS_SELECT:i["Fd"],ENUM_PERFORMANCE_FINISH:i["ub"]},ENUM_PERFORMANCE_TAGS:[],name:"",department:"",Allsubmit_action:!1,reject_msg:"",content:"",reviewData:[],tab_check:1,department_id:this.$route.params.id,team_overview:[],workcode:"",perPage:10}},components:{"nav-bar":function(){return a.e("chunk-6f993239").then(a.bind(null,"3208"))},"team-tabel":Object(l["a"])(a.e("chunk-7dab5545").then(a.bind(null,"16c1"))),"high-level-list":Object(l["a"])(a.e("chunk-2f9c31ff").then(a.bind(null,"2a9e"))),pagination:function(){return a.e("chunk-e4915324").then(a.bind(null,"486f"))}},created:function(){this.overReviewList(),this.get_LevelTags(),this.refreshList({page:this.currentPage,name:this.filterForm.name,stage:this.filterForm.status,label_id:this.filterForm.tags})},methods:{reload:function(){this.page_reload()},get_workcode:function(t){this.currentPage=1,this.workcode=t,this.refreshList({page:this.currentPage,name:this.filterForm.name,stage:this.filterForm.status,label_id:this.filterForm.tags})},get_LevelTags:function(){var t=this;return Object(o["z"])(1).then(function(e){t.ENUM_PERFORMANCE_TAGS=e}).catch(function(t){})},resetForm:function(t){this.$refs[t].resetFields()},goDetail:function(t){this.$router.push(Object(s["n"])(this.$route.params.id,t.id))},refreshList:function(t){var e=this;return t["perPage"]=this.perPage,t["workcode"]=this.workcode,Object(o["B"])(this.$route.params.id,t).then(function(t){var a=t.overview,n=t.list;e.tableData=n.data||[],e.total=n.total,e.team_overview=a}).catch(function(t){})},overReviewList:function(t){var e=this;return Object(o["C"])(this.$route.params.id,t).then(function(t){var a=t.overview,n=t.performanceInfo;e.overview=a||[],e.name=n.name||"",e.department=n.department||"",e.Allsubmit_action=n.submit,e.reject_msg=n.reject_msg}).catch(function(t){})},hight_level_team_reviewList:function(){var t=this;return Object(o["tb"])(this.$route.params.id).then(function(e){t.reviewData=e}).catch(function(t){})},handleCurrentChange:function(t){this.currentPage=t,this.refreshList({page:t,name:this.filterForm.name,stage:this.filterForm.status,label_id:this.filterForm.tags})},handleSizeChange:function(t){this.perPage=t,this.currentPage=1,this.refreshList({page:this.currentPage,name:this.filterForm.name,stage:this.filterForm.status,label_id:this.filterForm.tags})},Allsubmit_step_load:function(){var t=this;this.$createElement;this.$confirm("您已评完所有直属下级的评分, 请整体检查分布情况，并提交至隔级审核 ","提示",{confirmButtonText:"提交",cancelButtonText:"暂不提交"}).then(function(){setTimeout(function(){t.Allsubmit_step1()},500)}).catch(function(){})},Allsubmit_step1:function(){var t=this.overview,e=t[0].expected-t[0].count,a=t[1].child[0].expected-t[1].child[0].count,n=(t[1].child[1].expected,t[1].child[1].count,t[2].child[0].count-t[2].child[0].expected),r=t[2].child[1].count-t[2].child[1].expected;if(e>=0&&a>=0&&n>=0&&r>=0)this.Allsubmit_step3();else{var i="<p>不符合标签分布要求，是否确认继续提交？</p>                      <div style='display:flex'>\n                       <div style='width:100px;'>分布结果检查 :</div>                       <div style='width:300px;'>                          <p style='".concat(e>=0?"display:none":null,"'> <span style='color: #EB0C00;'>                                          ").concat(t[0].name,"总人数超出").concat(Math.abs(e),"人</span></p>                                         <p style='").concat(a>=0?"display:none":null,"'> <span style='color: #EB0C00;'>                                           ").concat(t[1].child[0].name,"总人数超出").concat(Math.abs(a),"人</span></p>                                         <p style='").concat(n>=0?"display:none":null,"'> <span style='color: #EB0C00;'>                                          ").concat(t[2].child[0].name,"总人数缺少").concat(Math.abs(n),"人</span></p>                                         <p style='").concat(r>=0?"display:none":null,"'> <span style='color: #EB0C00;'>                                          ").concat(t[2].child[1].name,"总人数缺少").concat(Math.abs(r),"人</span></p>                        </div>                        </div>");this.Allsubmit_step2(i)}},Allsubmit_step2:function(t){var e=this;this.$prompt(t,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"提交",inputPlaceholder:"请输入理由",cancelButtonText:"暂不提交",inputPattern:/\S/,inputErrorMessage:"提交理由不能为空"}).then(function(t){var a=t.value;e.Allsubmit_send(a)}).catch(function(){})},Allsubmit_step3:function(){var t=this;this.$prompt("<p>是否同意提交本次隔级评分</p>         <p>分布结果检查 : <span style='color: #EB0C00'> 全部符合23221分布比例要求</span></p>","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"提交",cancelButtonText:"暂不提交"}).then(function(e){var a=e.value;t.Allsubmit_send(a)}).catch(function(){})},Allsubmit_send:function(t){var e=this,a={content:t};return Object(o["ub"])(this.$route.params.id,a).then(function(t){e.currentPage,e.filterForm.name,e.filterForm.status;e.reload()}).catch(function(t){})}},computed:{},watch:{filterForm:{handler:function(t){var e={name:t.name,stage:t.status,label_id:t.tags,workcode:this.workcode,page:1};this.refreshList(e),this.currentPage=1},deep:!0}}},u=c,h=(a("afee"),a("2877")),d=Object(h["a"])(u,n,r,!1,null,"ab37f51a",null);e["default"]=d.exports},afee:function(t,e,a){"use strict";var n=a("9ade"),r=a.n(n);r.a},ee47:function(t,e,a){"use strict";var n=a("9f9e"),r=a.n(n);r.a}}]);