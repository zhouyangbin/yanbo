(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d6ca0d0"],{"11e9":function(t,e,a){var r=a("52a7"),n=a("4630"),l=a("6821"),o=a("6a99"),s=a("69a8"),i=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=l(t),e=o(e,!0),i)try{return c(t,e)}catch(a){}if(s(t,e))return n(!r.f.call(t,e),t[e])}},"5dbc":function(t,e,a){var r=a("d3f4"),n=a("8b97").set;t.exports=function(t,e,a){var l,o=e.constructor;return o!==a&&"function"==typeof o&&(l=o.prototype)!==a.prototype&&r(l)&&n&&n(t,l),t}},"8b97":function(t,e,a){var r=a("d3f4"),n=a("cb7c"),l=function(t,e){if(n(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,a){return l(t,a),e?t.__proto__=a:r(t,a),t}}({},!1):void 0),check:l}},9093:function(t,e,a){var r=a("ce10"),n=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},aa77:function(t,e,a){var r=a("5ca1"),n=a("be13"),l=a("79e5"),o=a("fdef"),s="["+o+"]",i="​",c=RegExp("^"+s+s+"*"),p=RegExp(s+s+"*$"),u=function(t,e,a){var n={},s=l(function(){return!!o[t]()||i[t]()!=i}),c=n[t]=s?e(d):o[t];a&&(n[a]=c),r(r.P+r.F*s,"String",n)},d=u.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(p,"")),t};t.exports=u},c5f6:function(t,e,a){"use strict";var r=a("7726"),n=a("69a8"),l=a("2d95"),o=a("5dbc"),s=a("6a99"),i=a("79e5"),c=a("9093").f,p=a("11e9").f,u=a("86cc").f,d=a("aa77").trim,_="Number",f=r[_],m=f,h=f.prototype,b=l(a("2aeb")(h))==_,g="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():d(e,3);var a,r,n,l=e.charCodeAt(0);if(43===l||45===l){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===l){switch(e.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+e}for(var o,i=e.slice(2),c=0,p=i.length;c<p;c++)if(o=i.charCodeAt(c),o<48||o>n)return NaN;return parseInt(i,r)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(b?i(function(){h.valueOf.call(a)}):l(a)!=_)?o(new m(y(e)),a,f):y(e)};for(var E,T=a("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),v=0;T.length>v;v++)n(m,E=T[v])&&!n(f,E)&&u(f,E,p(m,E));f.prototype=h,h.constructor=f,a("2aba")(r,_,f)}},d6d9:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"label-dialog",attrs:{"close-on-click-modal":!1,width:"650px",visible:t.visible},on:{close:t.close}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("\n    "+t._s("add"===t.infoType?t.constants.ADD_NEW_LABEL:t.constants.UPDATE_LABEL)+"\n  ")]),a("el-form",{ref:"tplForm",staticClass:"tpl-form",attrs:{rules:t.rules,model:t.tplForm}},[a("el-form-item",{attrs:{label:t.constants.LABEL_TYPE,prop:"tag_type"}},[a("el-select",{attrs:{placeholder:t.constants.PLEASE_SELECT_LABEL_TYPE},model:{value:t.tplForm.tag_type,callback:function(e){t.$set(t.tplForm,"tag_type",e)},expression:"tplForm.tag_type"}},t._l(t.tagTypesList,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})}),1)],1),a("el-form-item",{staticClass:"label-rules",attrs:{label:"标签规则",prop:"rules"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.tplForm.tag_type==t.constants.EXECUTIVE_LABEL_TYPE[0],expression:"tplForm.tag_type == constants.EXECUTIVE_LABEL_TYPE[0]"}],staticStyle:{width:"100%"},attrs:{data:t.table253,border:""}},[a("el-table-column",{attrs:{label:"标签名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请输入标签名称"},model:{value:e.row.display_name,callback:function(a){t.$set(e.row,"display_name",a)},expression:"scope.row.display_name"}})]}}])}),a("el-table-column",{attrs:{prop:"people_percent",label:"人数占比",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.people_percent)+"%\n          ")]}}])}),a("el-table-column",{attrs:{prop:"computation_rule_name",align:"center",label:"计算规则",width:"150"}})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.tplForm.tag_type==t.constants.EXECUTIVE_LABEL_TYPE[1],expression:"tplForm.tag_type == constants.EXECUTIVE_LABEL_TYPE[1]"}],staticStyle:{width:"100%"},attrs:{data:t.table271,border:""}},[a("el-table-column",{attrs:{label:"标签名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请输入标签名称"},model:{value:e.row.display_name,callback:function(a){t.$set(e.row,"display_name",a)},expression:"scope.row.display_name"}})]}}])}),a("el-table-column",{attrs:{prop:"people_percent",label:"人数占比",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.people_percent)+"%\n          ")]}}])}),a("el-table-column",{attrs:{prop:"computation_rule_name",align:"center",label:"计算规则",width:"150"}})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.tplForm.tag_type==t.constants.EXECUTIVE_LABEL_TYPE[2],expression:"tplForm.tag_type == constants.EXECUTIVE_LABEL_TYPE[2]"}],staticStyle:{width:"100%"},attrs:{data:t.table23221,border:""}},[a("el-table-column",{attrs:{label:"标签名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{class:e.row.isChildren?"add-padding":"",attrs:{placeholder:"请输入标签名称"},model:{value:e.row.display_name,callback:function(a){t.$set(e.row,"display_name",a)},expression:"scope.row.display_name"}})]}}])}),a("el-table-column",{attrs:{prop:"people_percent",label:"人数占比",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.people_percent)+"%\n          ")]}}])}),a("el-table-column",{attrs:{prop:"computation_rule_name",align:"center",label:"计算规则",width:"150"}})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.tplForm.tag_type==t.constants.EXECUTIVE_LABEL_TYPE[3],expression:"tplForm.tag_type == constants.EXECUTIVE_LABEL_TYPE[3]"}],staticStyle:{width:"100%"},attrs:{data:t.table2521,border:""}},[a("el-table-column",{attrs:{label:"标签名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{class:e.row.isChildren?"add-padding":"",attrs:{placeholder:"请输入标签名称"},model:{value:e.row.display_name,callback:function(a){t.$set(e.row,"display_name",a)},expression:"scope.row.display_name"}})]}}])}),a("el-table-column",{attrs:{prop:"people_percent",label:"人数占比",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.people_percent)+"%\n          ")]}}])}),a("el-table-column",{attrs:{prop:"computation_rule_name",align:"center",label:"计算规则",width:"150"}})],1)],1),a("el-form-item",{attrs:{label:t.constants.BUSINESS_UNIT_AND_FUNCTIONAL_UNIT,prop:"department_ids","label-width":"140px"}},[a("common-tree",{attrs:{orgTree:t.orgTree,department_ids:t.tplForm.department_ids},on:{selectedIds:t.selectedOrg}})],1),a("el-form-item",{attrs:{label:t.constants.FORCED_DISTRIBUTION,prop:"force_distribution"}},[a("el-checkbox",{model:{value:t.tplForm.force_distribution,callback:function(e){t.$set(t.tplForm,"force_distribution",e)},expression:"tplForm.force_distribution"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-button",{attrs:{round:"",size:"medium",type:"primary"},on:{click:t.submit}},[t._v("\n        "+t._s(t.constants.CONFIRM)+"\n      ")]),a("el-button",{staticClass:"btn-reset",attrs:{round:"",size:"medium"},on:{click:t.close}},[t._v("\n        "+t._s(t.constants.CANCEL)+"\n      ")])],1)],1)],1)},n=[],l=(a("ac6a"),a("c5f6"),a("38fb")),o=a("fea5"),s=a("372d"),i={components:{"common-tree":Object(s["a"])(a.e("chunk-25721bc4").then(a.bind(null,"30da")))},props:{visible:{type:Boolean,default:!1},infoType:{type:String,default:"add"},userId:{type:Number,default:0},orgTree:{type:Array,default:function(){return[]}}},data:function(){return{rules:{tag_type:[{required:!0,message:"请选择标签类型",trigger:"change"}],department_ids:[{type:"array",required:!0,message:"请至少选择一个业务单元/职能单元",trigger:"change"}],rules:[{required:!0}]},tplForm:{tag_type:"23221",rules:{},department_ids:[],force_distribution:!1},constants:{ADD_NEW_LABEL:l["d"],UPDATE_LABEL:l["Re"],CONFIRM:l["F"],CANCEL:l["z"],LABEL_TYPE:l["Vc"],BUSINESS_UNIT_AND_FUNCTIONAL_UNIT:l["y"],PLEASE_SELECT_MULTIPLE:l["Qd"],PLEASE_SELECT_LABEL_TYPE:l["Pd"],EXECUTIVE_LABEL_TYPE:l["Gb"],FORCED_DISTRIBUTION:l["Tb"],DEFAULT_TABLE253:l["V"],DEFAULT_TABLE271:l["W"],DEFAULT_TABLE23221:l["T"],DEFAULT_TABLE2521:l["U"]},defaultProps:{label:"department_name",children:"children"},tagTypesList:[],table253:l["V"],table271:l["W"],table23221:l["T"],table2521:l["U"],tagName:""}},computed:{checkedKeys:function(){return this.tplForm.department_ids.map(function(t){var e=t.department_id;return e})}},methods:{selectedOrg:function(t){this.tplForm.department_ids=t},close:function(){this.$emit("close")},handleCheckedExecutiveType:function(){},handleTagRules:function(t){var e=this,a=[];return t.forEach(function(t,r){var n={};e.tplForm.tag_type===e.tagName&&e.tagName&&(n["id"]=t.id),n["display_name"]=t.display_name,a.push(n)}),a},handle23221TagRules:function(){var t=this,e=[];return this.table23221.forEach(function(a,r){if(2===r||3===r){2===r&&(e[1]["children"]=[]);var n={};t.tagName&&(n["id"]=a.id),n["display_name"]=a.display_name,e[1]["children"].push(n)}else if(5===r||6===r){5===r&&(e[2]["children"]=[]);var l={};t.tagName&&(l["id"]=a.id),l["display_name"]=a.display_name,e[2]["children"].push(l)}else{var o={};t.tplForm.tag_type===t.tagName&&t.tagName&&(o["id"]=a.id),o["display_name"]=a.display_name,e.push(o)}}),e},handle2521TagRules:function(){var t=this,e=[];return this.table2521.forEach(function(a,r){if(3===r||4===r){3===r&&(e[2]["children"]=[]);var n={};t.tagName&&(n["id"]=a.id),n["display_name"]=a.display_name,e[2]["children"].push(n)}else{var l={};t.tplForm.tag_type===t.tagName&&t.tagName&&(l["id"]=a.id),l["display_name"]=a.display_name,e.push(l)}}),e},submit:function(){var t=this;this.$refs["tplForm"].validate(function(e){if(e){var a=[];t.tplForm.tag_type==l["Gb"][0]?a=t.handleTagRules(t.table253):t.tplForm.tag_type==l["Gb"][1]?a=t.handleTagRules(t.table271):t.tplForm.tag_type==l["Gb"][2]?a=t.handle23221TagRules():t.tplForm.tag_type==l["Gb"][3]&&(a=t.handle2521TagRules());var r={tag_type:t.tplForm.tag_type,force_distribution:t.tplForm.force_distribution?1:0,department_ids:t.tplForm.department_ids,rules:a};if("add"==t.infoType)return Object(o["Qb"])(r).then(function(e){t.close(),t.$emit("getList")}).catch(function(){});var n=r;return Object(o["vc"])(t.userId,n).then(function(e){t.close(),t.$emit("getList")}).catch(function(){})}})},updateTemplate:function(){},getAdminTagTypesList:function(){var t=this;Object(o["p"])().then(function(e){t.tagTypesList=e})},filterNode:function(t,e){return!t||-1!==e.department_name.indexOf(t)},treeChange:function(t,e,a){this.tplForm.department_ids=this.$refs.tree.getCheckedNodes()},handleTagRulesDataStructure:function(t){var e=[];return t.forEach(function(t,a){void 0==t.children&&e.push(t),void 0!=t.children&&(e.push(t),t.children.forEach(function(t,a){t["isChildren"]=!0,e.push(t)}),delete t.children)}),e},getTagDetails:function(){var t=this;Object(o["o"])(this.userId).then(function(e){t.tplForm.tag_type=e.tag_type,t.tplForm.tag_type==l["Gb"][0]?t.table253=t.handleTagRulesDataStructure(e.rules):t.tplForm.tag_type==l["Gb"][1]?t.table271=t.handleTagRulesDataStructure(e.rules):t.tplForm.tag_type==l["Gb"][2]?t.table23221=t.handleTagRulesDataStructure(e.rules):t.tplForm.tag_type==l["Gb"][3]&&(t.table2521=t.handleTagRulesDataStructure(e.rules)),t.tplForm.department_ids=e.department_ids,t.tplForm.force_distribution=!!e.force_distribution,t.tagName=e.tag_type})}},beforeDestroy:function(){this.$refs["tplForm"].resetFields()},created:function(){this.getAdminTagTypesList(),"add"!=this.infoType&&this.userId&&this.getTagDetails()}},c=i,p=(a("f4f3"),a("2877")),u=Object(p["a"])(c,r,n,!1,null,"10841031",null);e["default"]=u.exports},da01:function(t,e,a){},f4f3:function(t,e,a){"use strict";var r=a("da01"),n=a.n(r);n.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);