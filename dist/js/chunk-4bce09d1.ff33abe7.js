(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bce09d1"],{"11e9":function(e,t,a){var n=a("52a7"),r=a("4630"),l=a("6821"),o=a("6a99"),s=a("69a8"),i=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=l(e),t=o(t,!0),i)try{return c(e,t)}catch(a){}if(s(e,t))return r(!n.f.call(e,t),e[t])}},"17c5":function(e,t,a){"use strict";var n=a("9bf1"),r=a.n(n);r.a},"5dbc":function(e,t,a){var n=a("d3f4"),r=a("8b97").set;e.exports=function(e,t,a){var l,o=t.constructor;return o!==a&&"function"==typeof o&&(l=o.prototype)!==a.prototype&&n(l)&&r&&r(e,l),e}},"8b97":function(e,t,a){var n=a("d3f4"),r=a("cb7c"),l=function(e,t){if(r(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,a){return l(e,a),t?e.__proto__=a:n(e,a),e}}({},!1):void 0),check:l}},9093:function(e,t,a){var n=a("ce10"),r=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},"9bf1":function(e,t,a){},aa77:function(e,t,a){var n=a("5ca1"),r=a("be13"),l=a("79e5"),o=a("fdef"),s="["+o+"]",i="​",c=RegExp("^"+s+s+"*"),p=RegExp(s+s+"*$"),u=function(e,t,a){var r={},s=l(function(){return!!o[e]()||i[e]()!=i}),c=r[e]=s?t(d):o[e];a&&(r[a]=c),n(n.P+n.F*s,"String",r)},d=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(p,"")),e};e.exports=u},c5f6:function(e,t,a){"use strict";var n=a("7726"),r=a("69a8"),l=a("2d95"),o=a("5dbc"),s=a("6a99"),i=a("79e5"),c=a("9093").f,p=a("11e9").f,u=a("86cc").f,d=a("aa77").trim,_="Number",f=n[_],m=f,h=f.prototype,b=l(a("2aeb")(h))==_,E="trim"in String.prototype,g=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=E?t.trim():d(t,3);var a,n,r,l=t.charCodeAt(0);if(43===l||45===l){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===l){switch(t.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+t}for(var o,i=t.slice(2),c=0,p=i.length;c<p;c++)if(o=i.charCodeAt(c),o<48||o>r)return NaN;return parseInt(i,n)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof f&&(b?i(function(){h.valueOf.call(a)}):l(a)!=_)?o(new m(g(t)),a,f):g(t)};for(var y,T=a("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),v=0;T.length>v;v++)r(m,y=T[v])&&!r(f,y)&&u(f,y,p(m,y));f.prototype=h,h.constructor=f,a("2aba")(n,_,f)}},d6d9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"label-dialog",attrs:{"close-on-click-modal":!1,width:"650px",visible:e.visible},on:{close:e.close}},[a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[e._v("\n    "+e._s("add"===e.infoType?e.constants.ADD_NEW_LABEL:e.constants.EXECTIVE_UPDATE_LABEL)+"\n  ")]),a("el-form",{ref:"tplForm",staticClass:"tpl-form",attrs:{rules:e.rules,model:e.tplForm}},[a("el-form-item",{attrs:{label:e.constants.LABEL_TYPE,prop:"tag_type"}},[a("el-select",{attrs:{placeholder:e.constants.PLEASE_SELECT_LABEL_TYPE},model:{value:e.tplForm.tag_type,callback:function(t){e.$set(e.tplForm,"tag_type",t)},expression:"tplForm.tag_type"}},e._l(e.tagTypesList,function(e){return a("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1)],1),a("el-form-item",{staticClass:"label-rules",attrs:{label:"标签规则",prop:"rules"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.tplForm.tag_type==e.constants.EXECUTIVE_LABEL_TYPE[0],expression:"tplForm.tag_type == constants.EXECUTIVE_LABEL_TYPE[0]"}],staticStyle:{width:"100%"},attrs:{data:e.table253,border:""}},[a("el-table-column",{attrs:{label:"标签名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入标签名称",maxlength:"20","show-word-limit":""},model:{value:t.row.display_name,callback:function(a){e.$set(t.row,"display_name",a)},expression:"scope.row.display_name"}})]}}])}),a("el-table-column",{attrs:{prop:"people_percent",label:"人数占比",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.people_percent)+"%\n          ")]}}])}),a("el-table-column",{attrs:{prop:"computation_rule_name",align:"center",label:"计算规则",width:"150"}})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.tplForm.tag_type==e.constants.EXECUTIVE_LABEL_TYPE[1],expression:"tplForm.tag_type == constants.EXECUTIVE_LABEL_TYPE[1]"}],staticStyle:{width:"100%"},attrs:{data:e.table271,border:""}},[a("el-table-column",{attrs:{label:"标签名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入标签名称",maxlength:"20","show-word-limit":""},model:{value:t.row.display_name,callback:function(a){e.$set(t.row,"display_name",a)},expression:"scope.row.display_name"}})]}}])}),a("el-table-column",{attrs:{prop:"people_percent",label:"人数占比",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.people_percent)+"%\n          ")]}}])}),a("el-table-column",{attrs:{prop:"computation_rule_name",align:"center",label:"计算规则",width:"150"}})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.tplForm.tag_type==e.constants.EXECUTIVE_LABEL_TYPE[2],expression:"tplForm.tag_type == constants.EXECUTIVE_LABEL_TYPE[2]"}],staticStyle:{width:"100%"},attrs:{data:e.table23221,border:""}},[a("el-table-column",{attrs:{label:"标签名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{class:t.row.isChildren?"add-padding":"",attrs:{placeholder:"请输入标签名称",maxlength:"20","show-word-limit":""},model:{value:t.row.display_name,callback:function(a){e.$set(t.row,"display_name",a)},expression:"scope.row.display_name"}})]}}])}),a("el-table-column",{attrs:{label:"是否展示给员工",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.is_show,callback:function(a){e.$set(t.row,"is_show",a)},expression:"scope.row.is_show"}})]}}])}),a("el-table-column",{attrs:{prop:"people_percent",label:"人数占比",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.people_percent)+"%\n          ")]}}])}),a("el-table-column",{attrs:{prop:"computation_rule_name",align:"center",label:"计算规则",width:"150"}})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.tplForm.tag_type==e.constants.EXECUTIVE_LABEL_TYPE[3],expression:"tplForm.tag_type == constants.EXECUTIVE_LABEL_TYPE[3]"}],staticStyle:{width:"100%"},attrs:{data:e.table2521,border:""}},[a("el-table-column",{attrs:{label:"标签名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{class:t.row.isChildren?"add-padding":"",attrs:{placeholder:"请输入标签名称",maxlength:"20","show-word-limit":""},model:{value:t.row.display_name,callback:function(a){e.$set(t.row,"display_name",a)},expression:"scope.row.display_name"}})]}}])}),a("el-table-column",{attrs:{prop:"people_percent",label:"人数占比",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.people_percent)+"%\n          ")]}}])}),a("el-table-column",{attrs:{prop:"computation_rule_name",align:"center",label:"计算规则",width:"150"}})],1)],1),a("el-form-item",{attrs:{label:e.constants.BUSINESS_UNIT_AND_FUNCTIONAL_UNIT,prop:"department_ids","label-width":"140px"}},[a("common-tree",{attrs:{orgTree:e.orgTree,department_ids:e.tplForm.department_ids},on:{selectedIds:e.selectedOrg}})],1),a("el-form-item",{attrs:{label:e.constants.FORCED_DISTRIBUTION,prop:"force_distribution"}},[a("el-checkbox",{model:{value:e.tplForm.force_distribution,callback:function(t){e.$set(e.tplForm,"force_distribution",t)},expression:"tplForm.force_distribution"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-button",{attrs:{round:"",size:"medium",type:"primary"},on:{click:e.submit}},[e._v("\n        "+e._s(e.constants.CONFIRM)+"\n      ")]),a("el-button",{staticClass:"btn-reset",attrs:{round:"",size:"medium"},on:{click:e.close}},[e._v("\n        "+e._s(e.constants.CANCEL)+"\n      ")])],1)],1)],1)},r=[],l=(a("456d"),a("ac6a"),a("c5f6"),a("38fb")),o=a("fea5"),s=a("372d"),i={components:{"common-tree":Object(s["a"])(a.e("chunk-25721bc4").then(a.bind(null,"30da")))},props:{visible:{type:Boolean,default:!1},infoType:{type:String,default:"add"},userId:{type:Number,default:0},orgTree:{type:Array,default:function(){return[]}}},data:function(){return{rules:{tag_type:[{required:!0,message:"请选择标签类型",trigger:"change"}],department_ids:[{type:"array",required:!0,message:"请至少选择一个业务单元/职能单元",trigger:"change"}],rules:[{required:!0}]},tplForm:{tag_type:"23221",rules:{},department_ids:[],force_distribution:!1},constants:{ADD_NEW_LABEL:l["d"],EXECTIVE_UPDATE_LABEL:l["Kb"],CONFIRM:l["G"],CANCEL:l["A"],LABEL_TYPE:l["ad"],BUSINESS_UNIT_AND_FUNCTIONAL_UNIT:l["z"],PLEASE_SELECT_MULTIPLE:l["ae"],PLEASE_SELECT_LABEL_TYPE:l["Zd"],EXECUTIVE_LABEL_TYPE:l["Lb"],FORCED_DISTRIBUTION:l["Yb"],DEFAULT_TABLE253:l["X"],DEFAULT_TABLE271:l["Y"],DEFAULT_PERFORMANCE_TABLE23221:l["U"],DEFAULT_TABLE2521:l["W"]},defaultProps:{label:"department_name",children:"children"},tagTypesList:[],table253:l["X"],table271:l["Y"],table23221:l["U"],table2521:l["W"],tagName:""}},computed:{checkedKeys:function(){return this.tplForm.department_ids.map(function(e){var t=e.department_id;return t})}},methods:{selectedOrg:function(e){this.tplForm.department_ids=e},close:function(){this.$emit("close")},handleCheckedExecutiveType:function(){},handleTagRules:function(e){var t=this,a=[];return e.forEach(function(e,n){var r={};t.tplForm.tag_type===t.tagName&&t.tagName&&(r["id"]=e.id),r["display_name"]=e.display_name,a.push(r)}),a},handle23221TagRules:function(){var e=this,t=[];return this.table23221.forEach(function(a,n){if(2===n||3===n){2===n&&(t[1]["children"]=[]);var r={};e.tagName&&(r["id"]=a.id),r["display_name"]=a.display_name,t[1]["children"].push(r)}else if(5===n||6===n){5===n&&(t[2]["children"]=[]);var l={};e.tagName&&(l["id"]=a.id),l["display_name"]=a.display_name,t[2]["children"].push(l)}else{var o={};e.tplForm.tag_type===e.tagName&&e.tagName&&(o["id"]=a.id),o["display_name"]=a.display_name,t.push(o)}}),t},handle2521TagRules:function(){var e=this,t=[];return this.table2521.forEach(function(a,n){if(3===n||4===n){3===n&&(t[2]["children"]=[]);var r={};e.tagName&&(r["id"]=a.id),r["display_name"]=a.display_name,t[2]["children"].push(r)}else{var l={};e.tplForm.tag_type===e.tagName&&e.tagName&&(l["id"]=a.id),l["display_name"]=a.display_name,t.push(l)}}),t},isRule:function(e){var t=!0;return Object.keys(e).forEach(function(a){t=!!e[a].display_name}),t},submit:function(){var e=this;this.$refs["tplForm"].validate(function(t){if(t){var a=[],n=!0;e.tplForm.tag_type==l["Lb"][0]?(n=e.isRule(e.table253),a=e.handleTagRules(e.table253)):e.tplForm.tag_type==l["Lb"][1]?(n=e.isRule(e.table271),a=e.handleTagRules(e.table271)):e.tplForm.tag_type==l["Lb"][2]?(a=e.handle23221TagRules(),n=e.isRule(a),Object.keys(a).forEach(function(e){a[e].children&&Object.keys(a[e].children).forEach(function(t){a[e].children[t].display_name||(n=!1)})})):e.tplForm.tag_type==l["Lb"][3]&&(a=e.handle2521TagRules(),n=e.isRule(a),Object.keys(a).forEach(function(e){a[e].children&&Object.keys(a[e].children).forEach(function(t){a[e].children[t].display_name||(n=!1)})}));var r={tag_type:e.tplForm.tag_type,force_distribution:e.tplForm.force_distribution?1:0,department_ids:e.tplForm.department_ids,rules:a};if("add"===e.infoType){if(n)return Object(o["dc"])(r).then(function(t){e.$emit("getList")}).catch(function(){});e.$alert("标签名称不能为空！")}else{var s=r;if(n)return Object(o["Gc"])(e.userId,s).then(function(t){e.$emit("getList")}).catch(function(){});e.$alert("标签名称不能为空！")}}})},updateTemplate:function(){},getAdminTagTypesList:function(){var e=this;Object(o["x"])().then(function(t){e.tagTypesList=t})},filterNode:function(e,t){return!e||-1!==t.department_name.indexOf(e)},treeChange:function(e,t,a){this.tplForm.department_ids=this.$refs.tree.getCheckedNodes()},handleTagRulesDataStructure:function(e){var t=[];return e.forEach(function(e,a){void 0==e.children&&t.push(e),void 0!=e.children&&(t.push(e),e.children.forEach(function(e,a){e["isChildren"]=!0,t.push(e)}),delete e.children)}),t},getTagDetails:function(){var e=this;Object(o["w"])(this.userId).then(function(t){e.tplForm.tag_type=t.tag_type,e.tplForm.tag_type==l["Lb"][0]?e.table253=e.handleTagRulesDataStructure(t.rules):e.tplForm.tag_type==l["Lb"][1]?e.table271=e.handleTagRulesDataStructure(t.rules):e.tplForm.tag_type==l["Lb"][2]?e.table23221=e.handleTagRulesDataStructure(t.rules):e.tplForm.tag_type==l["Lb"][3]&&(e.table2521=e.handleTagRulesDataStructure(t.rules)),e.tplForm.department_ids=t.department_ids,e.tplForm.force_distribution=!!t.force_distribution,e.tagName=t.tag_type})}},beforeDestroy:function(){this.$refs["tplForm"].resetFields()},created:function(){this.getAdminTagTypesList(),"add"!=this.infoType&&this.userId&&this.getTagDetails()}},c=i,p=(a("17c5"),a("2877")),u=Object(p["a"])(c,n,r,!1,null,"6a62d7cc",null);t["default"]=u.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);