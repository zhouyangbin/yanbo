(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c04c890"],{"0899":function(e,t,i){"use strict";var a=i("1604"),s=i.n(a);s.a},"0e2c":function(e,t,i){"use strict";var a=i("af72"),s=i.n(a);s.a},1604:function(e,t,i){},"372d":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:!0,expression:"true",modifiers:{lock:!0}}],staticClass:"my-loading",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}})},s=[],n={},l=n,r=(i("ee47"),i("2877")),o=Object(r["a"])(l,a,s,!1,null,"6c517b7e",null),c=o.exports;i.d(t,"a",function(){return m});var m=function(e){return function(){return{component:e,loading:c,delay:0}}}},"38bf":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"assessment-detail"},[i("nav-bar",{attrs:{list:e.nav}}),i("br"),i("section",{staticClass:"content-container bg-white"},[i("div",{staticClass:"content-title"},[i("div",[e._v(e._s(e.performanceDetail.name))]),i("div",{staticClass:"create-btn"},[i("el-button",{attrs:{type:"primary",disabled:!e.performanceDetail.can_start},on:{click:e.openAssessment}},[e._v("开启考核")])],1)]),i("div",{staticClass:"list-timeline"},[i("div",{staticClass:"time-line",class:0===e.performanceDetail.stage?"":"active",attrs:{data:"填写中"+e.performanceDetail.indicator_fill_in+"/确认中"+e.performanceDetail.indicator_confirm}},[e._v("\n        指标设定\n      ")]),i("div",{staticClass:"time-line-sign",class:0===e.performanceDetail.stage?"":"active",attrs:{data:e._f("filterDate")(e.performanceDetail.indicator_setting_end_time)}}),i("div",{staticClass:"time-line-circle",class:e.performanceDetail.self_evaluation_begin_time>e.nowTime?"active":""},[i("div",{staticClass:"circle-list"}),i("div",{staticClass:"circle-list"}),i("div",{staticClass:"circle-list"}),i("div",{staticClass:"circle-list"}),i("div",{staticClass:"circle-list"}),i("div",{staticClass:"circle-list"})]),i("div",{staticClass:"time-line-sign",class:e.performanceDetail.self_evaluation_begin_time>e.nowTime?"active":"",attrs:{data:e._f("filterDate")(e.performanceDetail.self_evaluation_begin_time)}}),i("div",{staticClass:"time-line",class:e.performanceDetail.self_evaluation>e.nowTime?"active":"",attrs:{data:"自评中"+e.performanceDetail.self_evaluation}},[e._v("\n        自评\n      ")]),i("div",{staticClass:"time-line-sign",class:e.performanceDetail.superior_begin_time>e.nowTime?"active":"",attrs:{data:e._f("filterDate")(e.performanceDetail.superior_begin_time)}}),i("div",{staticClass:"time-line",class:e.performanceDetail.superior_begin_time>e.nowTime?"active":"",attrs:{data:"复评中"+e.performanceDetail.re_evaluation}},[e._v("\n        上级评分\n      ")]),i("div",{staticClass:"time-line-sign",class:e.performanceDetail.isolation_begin_time>e.nowTime?"active":"",attrs:{data:e._f("filterDate")(e.performanceDetail.isolation_begin_time)}}),i("div",{staticClass:"time-line",class:e.performanceDetail.isolation_begin_time>e.nowTime?"active":"",attrs:{data:"隔级审核中"+e.performanceDetail.isolation_adult}},[e._v("\n        隔级审核\n      ")]),i("div",{staticClass:"time-line-sign",class:e.performanceDetail.president_audit_begin_time>e.nowTime?"active":"",attrs:{data:e._f("filterDate")(e.performanceDetail.president_audit_begin_time)}}),i("div",{staticClass:"time-line",class:e.performanceDetail.president_audit_begin_time>e.nowTime?"active":"",attrs:{data:"总裁审核中"+e.performanceDetail.president_audit}},[e._v("\n        总裁审核\n      ")]),i("div",{staticClass:"time-line-sign",class:60===e.performanceDetail.stage?"active":"",attrs:{data:e._f("filterDate")(e.performanceDetail.result_comfirm_end_time)}}),i("div",{staticClass:"time-line",class:60===e.performanceDetail.stage?"active":"",attrs:{data:"确认中"+e.performanceDetail.confirm+"/已确认"+e.performanceDetail.confirmed}},[e._v("\n        结果确认\n      ")]),i("div",{staticClass:"time-line-sign",class:60===e.performanceDetail.stage?"active":"",attrs:{data:e._f("filterDate")(e.performanceDetail.result_confirm_end_time)}})])]),i("section",{staticClass:"content-container"},[i("div",{staticClass:"setting-list-box"},[i("div",{staticClass:"setting-title"},[i("div",[e._v("基本设置")]),i("div",{staticClass:"update-settin",on:{click:e.modifySettings}},[e._v("修改设置")])]),i("div",{staticClass:"basic-setting"},[i("div",{staticClass:"setting-detail"},[i("div",{staticClass:"setting-key"},[e._v("考核名称:")]),i("div",{staticClass:"setting-value"},[e._v(e._s(e.performanceDetail.name))])]),i("div",{staticClass:"setting-detail"},[i("div",{staticClass:"setting-key"},[e._v("适用范围:")]),i("div",{staticClass:"setting-value"},[e._v("\n            "+e._s(e.performanceDetail.departments_text)+"\n          ")])]),i("div",{staticClass:"setting-detail"},[i("div",{staticClass:"setting-key"},[e._v("绩效类型:")]),"annual"===e.performanceDetail.performance_type?i("div",{staticClass:"setting-value"},[e._v("\n            年度\n          ")]):e._e(),"semi-annual"===e.performanceDetail.performance_type?i("div",{staticClass:"setting-value"},[e._v("\n            半年度\n          ")]):e._e(),"quarter"===e.performanceDetail.performance_type?i("div",{staticClass:"setting-value"},[e._v("\n            季度\n          ")]):e._e(),"monthly"===e.performanceDetail.performance_type?i("div",{staticClass:"setting-value"},[e._v("\n            月度\n          ")]):e._e()]),i("div",{staticClass:"setting-detail"},[i("div",{staticClass:"setting-key"},[e._v("考核周期:")]),i("div",{staticClass:"setting-value"},[e._v("\n            "+e._s(e._f("filterDate")(e.performanceDetail.period_start_time))+"~"+e._s(e._f("filterDate")(e.performanceDetail.period_end_time))+"\n          ")])]),i("div",{staticClass:"setting-detail"},[i("div",{staticClass:"setting-key"},[e._v("绩效模板:")]),e._l(e.performanceDetail.templates,function(t){return i("div",{key:t.id,staticClass:"setting-value"},[i("span",[e._v(e._s(t.name))])])})],2),i("div",{staticClass:"setting-detail"},[i("div",{staticClass:"setting-key"},[e._v("是否允许申诉:")]),i("div",{staticClass:"setting-value"},[e._v("\n            "+e._s(1===e.performanceDetail.allow_appeal?"是":"否")+"\n          ")])]),i("div",{staticClass:"setting-detail"},[i("div",{staticClass:"setting-key"},[e._v("标签规则:")]),e._l(e.performanceDetail.tag,function(t){return i("div",{key:t.id,staticClass:"setting-value"},[i("span",[e._v(e._s(t.tag_type))])])})],2)])]),i("div",{staticClass:"setting-list-box"},[i("div",{staticClass:"setting-title"},[i("div",[e._v("时间设置")]),i("div",{staticClass:"update-settin",on:{click:e.modifyTimes}},[e._v("修改时间")])]),i("div",{staticClass:"time-setting"},[i("div",{staticClass:"time-setting-box"},[i("div",{staticClass:"setting-key"},[e._v("整体起止时间:")]),i("div",{staticClass:"setting-value"},[e._v("\n            "+e._s(e._f("filterDate")(e.initTime.entirety_start_time))+" 至\n            "+e._s(e._f("filterDate")(e.initTime.entirety_end_time))+"\n          ")])]),i("div",{staticClass:"time-setting-box"},[i("div",{staticClass:"setting-key"},[e._v("各阶段起止时间:")]),i("div",{staticClass:"setting-detail"},[i("div",{staticClass:"setting-value",attrs:{data:e._f("filterDate")(e.initTime.indicator_setting_end_time)}},[e._v("\n              指标设定截止时间\n            ")]),i("div",{staticClass:"setting-value",attrs:{data:e._f("filterDate")(e.initTime.self_evaluation_begin_time)}},[e._v("\n              自评时间\n            ")]),i("div",{staticClass:"setting-value",attrs:{data:e._f("filterDate")(e.initTime.superior_begin_time)}},[e._v("\n              上级评时间\n            ")]),i("div",{staticClass:"setting-value",attrs:{data:e._f("filterDate")(e.initTime.isolation_begin_time)}},[e._v("\n              隔级审核开始\n            ")]),i("div",{staticClass:"setting-value",attrs:{data:e._f("filterDate")(e.initTime.president_audit_begin_time)}},[e._v("\n              总裁审核时间开始\n            ")]),i("div",{staticClass:"setting-value",attrs:{data:e._f("filterDate")(e.initTime.result_confirm_end_time)}},[e._v("\n              结果确认截止时间\n            ")])])]),i("div",{staticClass:"time-setting-box"},[i("div",{staticClass:"setting-key"},[e._v("可申诉时间段:")]),i("div",{staticClass:"setting-value"},[e._v("\n            "+e._s(e._f("filterDate")(e.initTime.appeal_begin_time))+"至"+e._s(e._f("filterDate")(e.initTime.appeal_end_time))+"\n          ")])])])]),i("div",{staticClass:"setting-list-box"},[i("div",{staticClass:"setting-title"},[e._v("考核人员名单")]),i("el-form",{ref:"personalForm",staticClass:"form-list",attrs:{model:e.personalForm,"label-width":"110px"}},[i("el-form-item",{staticClass:"limit-width",attrs:{prop:"name_or_workcode",label:"姓名(工号):"}},[i("el-input",{attrs:{placeholder:"请输入姓名或工号"},model:{value:e.personalForm.name_or_workcode,callback:function(t){e.$set(e.personalForm,"name_or_workcode",t)},expression:"personalForm.name_or_workcode"}})],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"department_ids",label:"事业部:"}},[i("el-cascader",{attrs:{placeholder:"请选择事业部",props:e.filterProps,options:e.orgTree,"show-all-levels":!1},model:{value:e.personalForm.department_ids,callback:function(t){e.$set(e.personalForm,"department_ids",t)},expression:"personalForm.department_ids"}})],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"stage",label:"状态:"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.personalForm.stage,callback:function(t){e.$set(e.personalForm,"stage",t)},expression:"personalForm.stage"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"hrd_name",label:"HRD:"}},[i("el-input",{attrs:{placeholder:"请输入姓名或工号"},model:{value:e.personalForm.hrd_name,callback:function(t){e.$set(e.personalForm,"hrd_name",t)},expression:"personalForm.hrd_name"}})],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"superior_name",label:"直接上级:"}},[i("el-input",{attrs:{placeholder:"请输入姓名或工号"},model:{value:e.personalForm.superior_name,callback:function(t){e.$set(e.personalForm,"superior_name",t)},expression:"personalForm.superior_name"}})],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"hrbp_name",label:"HRBP:"}},[i("el-input",{attrs:{placeholder:"请输入姓名或工号"},model:{value:e.personalForm.hrbp_name,callback:function(t){e.$set(e.personalForm,"hrbp_name",t)},expression:"personalForm.hrbp_name"}})],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"distribution_253",label:"253分布:"}},[i("el-input",{attrs:{placeholder:"请选择"},model:{value:e.personalForm.distribution_253,callback:function(t){e.$set(e.personalForm,"distribution_253",t)},expression:"personalForm.distribution_253"}})],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"executive_type",label:"组织部类别:"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.personalForm.executive_type,callback:function(t){e.$set(e.personalForm,"executive_type",t)},expression:"personalForm.executive_type"}},e._l(e.executiveTypes,function(e){return i("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1)],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"isolation_name",label:"隔级:"}},[i("el-input",{attrs:{placeholder:"请输入姓名或工号"},model:{value:e.personalForm.isolation_name,callback:function(t){e.$set(e.personalForm,"isolation_name",t)},expression:"personalForm.isolation_name"}})],1),i("el-form-item",{staticClass:"limit-width",attrs:{prop:"president_name",label:"总裁:"}},[i("el-input",{attrs:{placeholder:"请输入姓名或工号"},model:{value:e.personalForm.president_name,callback:function(t){e.$set(e.personalForm,"president_name",t)},expression:"personalForm.president_name"}})],1),i("el-form-item",{staticClass:"on-query"},[i("el-button",{on:{click:function(t){return e.resetForm("personalForm")}}},[e._v("重置")]),i("el-button",{attrs:{type:"primary"},on:{click:e.onQuery}},[e._v("查询")])],1)],1),i("div",{staticClass:"table-operate"},[i("el-button-group",{staticClass:"btn-group"},[i("el-button",{attrs:{icon:"el-icon-bell",disabled:e.currentStage<10},on:{click:e.reminder}},[e._v("提醒")]),i("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addPerson}},[e._v("添加人员")]),i("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.exportList}},[e._v("导出名单")]),i("el-popover",{attrs:{placement:"bottom",width:"120",trigger:"hover"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:e.constants.postUploadFinancialIndicators(this.performanceId)}},[i("div",{staticClass:"more-btn"},[i("i",{staticClass:"el-icon-upload2"}),i("span",[e._v("上传财务指标")])])]),i("el-upload",{staticClass:"upload-demo",attrs:{action:e.constants.postUploadWorkIndicators(this.performanceId)}},[i("div",{staticClass:"more-btn"},[i("i",{staticClass:"el-icon-upload2"}),i("span",[e._v("上传工作目标")])])]),i("div",{staticClass:"more-btn",on:{click:e.removeList}},[i("i",{staticClass:"el-icon-delete"}),i("span",[e._v("移除")])]),i("el-button",{attrs:{slot:"reference",icon:"el-icon-more"},slot:"reference"})],1)],1),i("div",{staticClass:"table-number"},[i("i",{staticClass:"el-icon-info"}),e._v(" 共"+e._s(e.total)+"人，已选\n          "),i("span",[e._v(e._s(e.selectedNumber))]),e._v(" 人\n        ")])],1),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.userList,stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"workcode",label:"工号",width:"80"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}}),i("el-table-column",{attrs:{prop:"business_unit_name",width:"200",label:"总部/事业部"}}),i("el-table-column",{attrs:{prop:"sub_department_name",label:"大部门/分校",width:"200"}}),i("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"100"}}),i("el-table-column",{attrs:{prop:"executive_type_text",label:"组织部类别",width:"200"}}),i("el-table-column",{attrs:{prop:"hrbp_name",label:"HRBP"}}),i("el-table-column",{attrs:{prop:"hrd_name",label:"HRD"}}),i("el-table-column",{attrs:{prop:"superior_name",label:"直接上级"}}),i("el-table-column",{attrs:{prop:"isolation_name",label:"隔级"}}),i("el-table-column",{attrs:{prop:"president_name",label:"总裁"}}),i("el-table-column",{attrs:{prop:"self_evaluation_score",label:"自评分"}}),i("el-table-column",{attrs:{prop:"re_evaluation_score",label:"复评分"}}),i("el-table-column",{attrs:{prop:"culture_score",label:"文化评分"}}),i("el-table-column",{attrs:{prop:"final_score",label:"最终成绩"}}),i("el-table-column",{attrs:{prop:"distribution_253",label:"规则分布"}}),i("el-table-column",{attrs:{prop:"stage_text",fixed:"right",width:"80",label:"状态"}}),i("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.modify(t.row)}}},[e._v("修改")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.remove(t.row)}}},[e._v("移除")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.viewIndicators(t.row)}}},[e._v("查看指标")])]}}])})],1),i("br"),i("el-row",{attrs:{type:"flex",justify:"end"}},[i("pagination",{attrs:{currentPage:e.currentPage,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e.showDialog?i("assessment-dialog",{attrs:{visible:e.showDialog,infoType:e.infoType,performanceId:e.performanceId,performanceTypes:e.performanceTypes,orgTree:e.orgTree},on:{close:e.tplDialogClose,define:e.tplDefine}}):e._e(),e.showSetupTime?i("setup-time",{attrs:{visible:e.showSetupTime,performanceId:e.performanceId,initTime:e.initTime},on:{close:e.setupTimeClose,define:e.confirmTime}}):e._e(),e.showModifyUser?i("modify-user",{attrs:{visible:e.showModifyUser,userType:e.userType,userId:e.userId,performanceId:e.performanceId,userInfo:e.userInfo},on:{close:e.modifyUserClose,define:e.confirmUser}}):e._e(),e.showConfirmDialog?i("confirm-dialog",{attrs:{visible:e.showConfirmDialog,tipsText:e.tipsText},on:{define:e.confirmDialog,close:e.closeDialog}}):e._e()],1)},s=[],n=i("372d"),l=i("fea5"),r=i("c9f1"),o=(i("38fb"),{components:{"nav-bar":function(){return i.e("chunk-d5094d72").then(i.bind(null,"3208"))},"confirm-dialog":Object(n["a"])(i.e("chunk-1f5e0c84").then(i.bind(null,"1f04"))),"assessment-dialog":Object(n["a"])(i.e("chunk-3fd65946").then(i.bind(null,"4abf"))),"setup-time":Object(n["a"])(i.e("chunk-530653ba").then(i.bind(null,"1b32"))),"modify-user":Object(n["a"])(i.e("chunk-070488ae").then(i.bind(null,"94a0"))),pagination:function(){return i.e("chunk-28d9b0e5").then(i.bind(null,"486f"))}},data:function(){return{filterProps:{value:"id",label:"name",children:"children"},statusOptions:[{label:"全部",value:""},{label:"草稿",value:"1"},{label:"进行中",value:"2"},{label:"已结束",value:"4"}],executiveTypes:[],performanceDetail:{},performanceId:this.$route.params.id,currentPage:1,total:0,selectedNumber:0,showConfirmDialog:!1,showDialog:!1,showSetupTime:!1,infoType:"add",performanceTypes:[],orgTree:[],tipsText:"",nowTime:"",nav:[{label:"组织部绩效考核列表",href:r["S"]},{label:"考核详情",active:!0}],personalForm:{name_or_workcode:"",department_ids:[],stage:"",executive_type:"",superior_name:"",isolation_name:"",president_name:"",hrbp_name:"",distribution_253:"",hrd_name:""},userList:[],performance_user_ids:[],showModifyUser:!1,userInfo:{},userType:"add",userId:"",currentStage:0,constants:{postUploadFinancialIndicators:r["jb"],postUploadWorkIndicators:r["kb"]}}},computed:{initTime:function(){return{start_time:this.performanceDetail.start_time,end_time:this.performanceDetail.end_time,indicator_setting_end_time:this.performanceDetail.indicator_setting_end_time,self_evaluation_begin_time:this.performanceDetail.self_evaluation_begin_time,superior_begin_time:this.performanceDetail.superior_begin_time,isolation_begin_time:this.performanceDetail.isolation_begin_time,president_audit_begin_time:this.performanceDetail.president_audit_begin_time,result_confirm_end_time:this.performanceDetail.result_confirm_end_time,appeal_begin_time:this.performanceDetail.appeal_begin_time,appeal_end_time:this.performanceDetail.appeal_end_time}}},filters:{filterDate:function(e){var t="";return e&&(t=/\d{4}-\d{1,2}-\d{1,2}/g.exec(e),t=t[0]),t}},methods:{confirmUser:function(){this.showModifyUser=!1,this.getUserList()},tplDefine:function(){this.showDialog=!1,this.getPerformanceDetailData()},confirmTime:function(){this.showSetupTime=!1,this.getPerformanceDetailData()},modifyUserClose:function(){this.showModifyUser=!1},handleSelectionChange:function(e){console.log(e)},reminder:function(){Object(l["eb"])(this.performanceId).then(function(e){console.log(e)}).catch(function(e){})},addPerson:function(){this.userType="add",this.showModifyUser=!0},exportList:function(){window.open(Object(r["gb"])(this.performanceId),"_blank","noopener")},uploadFinancialIndicators:function(){console.log("uploadFinancialIndicators")},uploadWorkObjectives:function(){console.log("uploadWorkObjectives")},removeList:function(){if(0===this.performance_user_ids.length)return!1;Object(l["k"])(this.performanceId,this.performance_user_ids).then(function(e){console.log(e)}).catch(function(e){})},viewDistribution:function(){},modifySettings:function(){this.infoType="modify",this.showDialog=!0},modifyTimes:function(){this.showSetupTime=!0},setupTimeClose:function(){this.showSetupTime=!1},tplDialogClose:function(){this.showDialog=!1},openAssessment:function(){this.showConfirmDialog=!0,this.tipsText="是否确认启动考核？"},confirmDialog:function(e){var t=this;"open"===e?Object(l["vc"])(this.performanceId).then(function(e){t.showConfirmDialog=!1,t.getPerformanceDetailData()}).catch(function(e){}):this.showConfirmDialog=!1},closeDialog:function(){this.showConfirmDialog=!1},handleCurrentChange:function(){this.currentPage=val},onQuery:function(){this.getUserList()},resetForm:function(e){this.$refs[e].resetFields(),this.getUserList()},viewIndicators:function(e){},remove:function(e){},modify:function(e){this.userType="modify",this.showModifyUser=!0},getUserList:function(){var e=this;Object(l["hb"])(this.performanceId,this.personalForm).then(function(t){e.userList=t}).catch(function(e){})},getPerformanceDetailData:function(){var e=this;Object(l["cb"])(this.performanceId).then(function(t){e.currentStage=t.stage,e.performanceDetail=t}).catch(function(e){})}},created:function(){var e=this;this.nowTime=new Date,this.getPerformanceDetailData(),Object(l["ab"])().then(function(t){e.orgTree=t}).catch(function(e){}),Object(l["gb"])().then(function(t){e.performanceTypes=t}).catch(function(e){}),Object(l["z"])().then(function(t){e.executiveTypes=t}).catch(function(e){}),this.getUserList()}}),c=o,m=(i("0899"),i("0e2c"),i("2877")),d=Object(m["a"])(c,a,s,!1,null,"d070fc02",null);t["default"]=d.exports},"9f9e":function(e,t,i){},af72:function(e,t,i){},ee47:function(e,t,i){"use strict";var a=i("9f9e"),s=i.n(a);s.a}}]);