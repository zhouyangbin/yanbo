{"version":3,"sources":["webpack:///src/views/usermanage/index.vue","webpack:///./src/views/usermanage/index.vue?a4c3","webpack:///./src/views/usermanage/index.vue"],"names":["usermanage","__webpack_require__","e","then","bind","TEXT","LABEL_NAME","ROLE","LABEL_STATUS","LABEL_CREATED_DATE","LABEL_OPERATIONS","LABEL_MODIFY","LABEL_FORBIDDEN","LABEL_ENABLED","LABEL_DEL","LABEL_ADD","LABEL_ADD_USER","LABEL_EMPTY","LABEL_SELECT_DIVISION","BIND_DEPARTMENT","getManagers","getDepartments","_this","this","conditionForm","data","res","total","catch","err","_this2","Object","API","name","department_id","_this3","userForm","id","email","empID","_this4","roles","_this5","active","_this6","val","row","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","list","nav","span","ref","inline","model","placeholder","constants","on","input","changeCondition","value","callback","$$v","$set","expression","change","_l","item","key","label","round","click","$event","resetForm","_v","_s","type","justify","submitUser","visible","addDialogVisible","title","disabled","submit","addSubmit","update:visible","update:userForm","_e","directives","rawName","staticStyle","width","userTable","stripe","height","tableHeight","prop","show-overflow-tooltip","align","scopedSlots","_u","fn","scope","map","v","join","fixed","size","updateUser","enabledUser","deleteUser","class","disable","has_achievement_permission","has_culture_permission","updateDialogVisible","updateSubmit","currentInfo","selectedUser","bindDialogVisible","currentPage","page","current-change","handleCurrentChange","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","component_normalizer","__webpack_exports__"],"mappings":"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","file":"js/15.e54df0aa.js","sourcesContent":["<template>\n  <div class=\"user-manage\">\n    <nav-bar :list=\"nav\"></nav-bar>\n    <section class=\"content-container\">\n      <!-- screening condition -->\n      <el-row>\n        <el-col :span=\"16\">\n          <el-form :inline=\"true\" :model=\"conditionForm\" ref=\"conditionForm\">\n            <el-form-item>\n              <el-input v-model=\"conditionForm.name\" :placeholder=\"constants.LABEL_NAME\" @input=\"changeCondition\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-select v-model=\"conditionForm.department_id\" :placeholder=\"constants.LABEL_SELECT_DIVISION\" @change=\"changeCondition\">\n                <el-option v-for=\"item in departments\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item>\n              <el-button round @click=\"resetForm('conditionForm')\">{{constants.LABEL_EMPTY}}</el-button>\n            </el-form-item>\n          </el-form>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-row type=\"flex\" justify=\"end\">\n            <el-button type=\"primary\" round @click=\"submitUser\">{{constants.LABEL_ADD_USER}}</el-button>\n          </el-row>\n        </el-col>\n      </el-row>\n\n      <!-- addUser dialog -->\n      <user-dialog v-if=\"addDialogVisible\" :visible.sync=\"addDialogVisible\" :title=\"constants.LABEL_ADD\" :userForm.sync=\"userForm\" :disabled=\"false\" :submit=\"addSubmit\"></user-dialog>\n\n      <!-- user tableList -->\n      <el-table :data=\"userTable\" stripe style=\"width:100%\" v-loading=\"tableLoading\" :height=\"tableHeight\">\n        <el-table-column v-for=\"item in tableColumn\" :key=\"item.prop\" :prop=\"item.prop\" :label=\"item.label\" :width=\"item.width\" :show-overflow-tooltip=\"true\" align=\"center\"></el-table-column>\n        <el-table-column :label=\"constants.ROLE\" :show-overflow-tooltip=\"true\" align=\"center\">\n          <template slot-scope=\"scope\">\n            {{scope.row.roles.map(v=>v.name).join(\", \")}}\n          </template>\n        </el-table-column>\n        <el-table-column :label=\"constants.LABEL_STATUS\" width=\"80\" align=\"center\">\n          <template slot-scope=\"scope\">\n            {{scope.row.active == '1'?constants.LABEL_ENABLED:constants.LABEL_FORBIDDEN}}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"created_at\" :label=\"constants.LABEL_CREATED_DATE\" width=\"180\" align=\"center\"></el-table-column>\n        <el-table-column fixed=\"right\" :label=\"constants.LABEL_OPERATIONS\" align=\"center\" width=\"250\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"updateUser(scope.row)\" type=\"text\" size=\"small\">{{constants.LABEL_MODIFY}}</el-button>\n            <el-button @click=\"enabledUser(scope.row)\" type=\"text\" size=\"small\">{{scope.row.active==1?constants.LABEL_FORBIDDEN:constants.LABEL_ENABLED}}</el-button>\n            <el-button @click=\"deleteUser(scope.row)\" type=\"text\" size=\"small\">{{constants.LABEL_DEL}}</el-button>\n            <el-button :class=\"{'disable':!scope.row.has_achievement_permission&&!scope.row.has_culture_permission}\" @click=\"bind(scope.row)\" type=\"text\" size=\"small\">{{constants.BIND_DEPARTMENT}}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- update dialog -->\n      <user-dialog v-if=\"updateDialogVisible\" :visible.sync=\"updateDialogVisible\" :title=\"constants.LABEL_MODIFY\" :userForm.sync=\"userForm\" :disabled=\"true\" :submit=\"updateSubmit\"></user-dialog>\n      <br>\n      <bind-dialog :currentInfo=\"selectedUser\" v-if=\"bindDialogVisible\" :visible.sync=\"bindDialogVisible\"></bind-dialog>\n      <!-- pagination -->\n      <el-row type=\"flex\" justify=\"end\">\n        <pagination :currentPage=\"conditionForm.page\" @current-change=\"handleCurrentChange\" :total=\"total\"></pagination>\n      </el-row>\n    </section>\n  </div>\n</template>\n<script>\nimport {\n  USER_MANAGE,\n  ATTENTION,\n  LABEL_CONFIRM,\n  LABEL_CANCEL,\n  LABEL_NAME,\n  LABEL_TAL_EMAIL,\n  // LABEL_SCOPE,\n  ROLE,\n  LABEL_STATUS,\n  LABEL_CREATED_DATE,\n  LABEL_OPERATIONS,\n  LABEL_MODIFY,\n  LABEL_FORBIDDEN,\n  LABEL_ENABLED,\n  LABEL_DEL,\n  LABEL_ADD,\n  LABEL_ADD_USER,\n  LABEL_EMPTY,\n  LABEL_SELECT_DIVISION,\n  CONST_DELETE_SUCCESS,\n  CONST_OPERATIONS_SUCCESS,\n  CONST_MODIFY_SUCCESS,\n  CONST_UNDELETE_SUCCESS,\n  LABEL_USER_DEL_MSG,\n  BIND_DEPARTMENT\n} from \"@/constants/TEXT\";\nimport {\n  getManagers,\n  addManager,\n  getDepartments,\n  deleteManager,\n  updateManager\n} from \"@/constants/API\";\nexport default {\n  components: {\n    \"nav-bar\": () => import(\"@/components/common/Navbar/index.vue\"),\n    \"user-dialog\": () =>\n      import(\"@/components/modules/usermanage/UserDialog.vue\"),\n    pagination: () => import(\"@/components/common/Pagination/index.vue\"),\n    \"bind-dialog\": () =>\n      import(\"@/components/modules/usermanage/BindDP/index.vue\")\n  },\n  data() {\n    return {\n      nav: [\n        {\n          label: USER_MANAGE,\n          active: true\n        }\n      ],\n      constants: {\n        LABEL_NAME,\n        ROLE,\n        LABEL_STATUS,\n        LABEL_CREATED_DATE,\n        LABEL_OPERATIONS,\n        LABEL_MODIFY,\n        LABEL_FORBIDDEN,\n        LABEL_ENABLED,\n        LABEL_DEL,\n        LABEL_ADD,\n        LABEL_ADD_USER,\n        LABEL_EMPTY,\n        LABEL_SELECT_DIVISION,\n        BIND_DEPARTMENT\n      },\n      // 用户筛选条件\n      conditionForm: { name: \"\", department_id: \"\", page: 1 },\n      // 分页\n      total: 0,\n      // 事业部列表\n      departments: [],\n      bindDialogVisible: false,\n      // dialog\n      addDialogVisible: false,\n      updateDialogVisible: false,\n      // user form(add or update)\n      userForm: { email: \"\", name: \"\", roles: [], empID: \"\" },\n      // 操作用户ID\n      userId: \"\",\n      // table头部\n      tableColumn: [\n        { prop: \"name\", label: LABEL_NAME, width: \"150\" },\n        { prop: \"email\", label: LABEL_TAL_EMAIL, width: \"\" }\n      ],\n      // table数据\n      userTable: [],\n      tableLoading: true,\n      // nav-bar导航栏高度61px、预留pagination分页40px\n      tableHeight: \"calc(100% - 61px - 40px)\",\n      selectedUser: {}\n    };\n  },\n  created() {\n    this.getManagers();\n    this.getDepartments();\n  },\n  methods: {\n    // 用户列表\n    getManagers() {\n      const data = { ...this.conditionForm };\n      getManagers(data)\n        .then(res => {\n          // console.log(res)\n          this.tableLoading = false;\n          if (res) {\n            this.total = res.total;\n            this.userTable = res.data;\n          }\n        })\n        .catch(err => {\n          this.tableLoading = false;\n        });\n    },\n    // 事业部-分校列表\n    getDepartments() {\n      getDepartments()\n        .then(res => {\n          res.map(function(item) {\n            item.label = item.name;\n            item.value = item.department_id;\n          });\n          this.departments = res;\n        })\n        .catch(err => {});\n    },\n\n    // 更改筛选条件\n    changeCondition() {\n      this.conditionForm = Object.assign({}, this.conditionForm, { page: 1 });\n      this.getManagers();\n    },\n    // 清空\n    resetForm(formName) {\n      this.conditionForm = { name: \"\", department_id: \"\", page: 1 };\n      this.getManagers();\n    },\n    // 新增用户\n    submitUser() {\n      this.addDialogVisible = true;\n      this.userForm = { email: \"\", name: \"\", roles: [], empID: \"\" };\n    },\n    // 提交新增\n    addSubmit() {\n      const { email, roles } = this.userForm;\n      return addManager({ email, role_ids: roles.map(v => v.id) })\n        .then(res => {\n          this.addDialogVisible = false;\n          this.getManagers();\n        })\n        .catch(err => {});\n    },\n    // 修改用户\n    updateUser(user) {\n      this.updateDialogVisible = true;\n      this.userForm = {\n        email: user.email,\n        name: user.name,\n        empID: user.empID,\n        roles: user.roles || []\n      };\n      this.userId = user.id;\n    },\n    // 提交修改\n    updateSubmit() {\n      const { roles } = this.userForm;\n      return updateManager(this.userId, { role_ids: roles.map(v => v.id) })\n        .then(res => {\n          this.$message({\n            type: \"success\",\n            message: CONST_MODIFY_SUCCESS\n          });\n          this.userId = \"\";\n          this.updateDialogVisible = false;\n          this.getManagers();\n        })\n        .catch(err => {});\n    },\n    // 启用/禁用用户\n    enabledUser(user) {\n      const active = user.active ^ 1;\n      updateManager(user.id, { active })\n        .then(res => {\n          this.$message({\n            type: \"success\",\n            message: user.active == 1 ? \"禁用成功\" : \"启用成功\"\n          });\n          this.getManagers();\n        })\n        .catch(err => {});\n    },\n    // 删除用户\n    deleteUser(user) {\n      this.$confirm(LABEL_USER_DEL_MSG, ATTENTION, {\n        roundButton: true,\n        confirmButtonText: LABEL_CONFIRM,\n        cancelButtonText: LABEL_CANCEL,\n        type: \"warning\",\n        center: true\n      })\n        .then(() => {\n          deleteManager(user.id)\n            .then(res => {\n              this.getManagers();\n              this.$message({\n                type: \"success\",\n                message: CONST_DELETE_SUCCESS\n              });\n            })\n            .catch(err => {});\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: CONST_UNDELETE_SUCCESS\n          });\n        });\n    },\n    // 分页\n    handleCurrentChange(val) {\n      this.conditionForm = Object.assign({}, this.conditionForm, { page: val });\n      this.getManagers();\n    },\n    bind(row) {\n      this.selectedUser = row;\n      this.bindDialogVisible = true;\n    }\n  },\n  watch: {\n    bindDialogVisible(v) {\n      if (!v) {\n        this.getManagers();\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.user-manage {\n  height: 100%;\n}\n.content-container {\n  height: calc(100% - 40px - 61px);\n  overflow: hidden;\n}\n.user-manage .disable {\n  pointer-events: none;\n  color: grey;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/usermanage/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-manage\"},[_c('nav-bar',{attrs:{\"list\":_vm.nav}}),_c('section',{staticClass:\"content-container\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":16}},[_c('el-form',{ref:\"conditionForm\",attrs:{\"inline\":true,\"model\":_vm.conditionForm}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":_vm.constants.LABEL_NAME},on:{\"input\":_vm.changeCondition},model:{value:(_vm.conditionForm.name),callback:function ($$v) {_vm.$set(_vm.conditionForm, \"name\", $$v)},expression:\"conditionForm.name\"}})],1),_c('el-form-item',[_c('el-select',{attrs:{\"placeholder\":_vm.constants.LABEL_SELECT_DIVISION},on:{\"change\":_vm.changeCondition},model:{value:(_vm.conditionForm.department_id),callback:function ($$v) {_vm.$set(_vm.conditionForm, \"department_id\", $$v)},expression:\"conditionForm.department_id\"}},_vm._l((_vm.departments),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1),_c('el-form-item',[_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":function($event){_vm.resetForm('conditionForm')}}},[_vm._v(_vm._s(_vm.constants.LABEL_EMPTY))])],1)],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":_vm.submitUser}},[_vm._v(_vm._s(_vm.constants.LABEL_ADD_USER))])],1)],1)],1),(_vm.addDialogVisible)?_c('user-dialog',{attrs:{\"visible\":_vm.addDialogVisible,\"title\":_vm.constants.LABEL_ADD,\"userForm\":_vm.userForm,\"disabled\":false,\"submit\":_vm.addSubmit},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"update:userForm\":function($event){_vm.userForm=$event}}}):_vm._e(),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tableLoading),expression:\"tableLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userTable,\"stripe\":\"\",\"height\":_vm.tableHeight}},[_vm._l((_vm.tableColumn),function(item){return _c('el-table-column',{key:item.prop,attrs:{\"prop\":item.prop,\"label\":item.label,\"width\":item.width,\"show-overflow-tooltip\":true,\"align\":\"center\"}})}),_c('el-table-column',{attrs:{\"label\":_vm.constants.ROLE,\"show-overflow-tooltip\":true,\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s(scope.row.roles.map(function (v){ return v.name; }).join(\", \"))+\"\\n        \")]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.constants.LABEL_STATUS,\"width\":\"80\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s(scope.row.active == '1'?_vm.constants.LABEL_ENABLED:_vm.constants.LABEL_FORBIDDEN)+\"\\n        \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"created_at\",\"label\":_vm.constants.LABEL_CREATED_DATE,\"width\":\"180\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":_vm.constants.LABEL_OPERATIONS,\"align\":\"center\",\"width\":\"250\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.updateUser(scope.row)}}},[_vm._v(_vm._s(_vm.constants.LABEL_MODIFY))]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.enabledUser(scope.row)}}},[_vm._v(_vm._s(scope.row.active==1?_vm.constants.LABEL_FORBIDDEN:_vm.constants.LABEL_ENABLED))]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.deleteUser(scope.row)}}},[_vm._v(_vm._s(_vm.constants.LABEL_DEL))]),_c('el-button',{class:{'disable':!scope.row.has_achievement_permission&&!scope.row.has_culture_permission},attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.bind(scope.row)}}},[_vm._v(_vm._s(_vm.constants.BIND_DEPARTMENT))])]}}])})],2),(_vm.updateDialogVisible)?_c('user-dialog',{attrs:{\"visible\":_vm.updateDialogVisible,\"title\":_vm.constants.LABEL_MODIFY,\"userForm\":_vm.userForm,\"disabled\":true,\"submit\":_vm.updateSubmit},on:{\"update:visible\":function($event){_vm.updateDialogVisible=$event},\"update:userForm\":function($event){_vm.userForm=$event}}}):_vm._e(),_c('br'),(_vm.bindDialogVisible)?_c('bind-dialog',{attrs:{\"currentInfo\":_vm.selectedUser,\"visible\":_vm.bindDialogVisible},on:{\"update:visible\":function($event){_vm.bindDialogVisible=$event}}}):_vm._e(),_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('pagination',{attrs:{\"currentPage\":_vm.conditionForm.page,\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange}})],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3cc0aa09\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/usermanage/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3cc0aa09\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vincent/Documents/Working/FE-PC-TDC/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vincent/Documents/Working/FE-PC-TDC/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3cc0aa09\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3cc0aa09\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/usermanage/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}