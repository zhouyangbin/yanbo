(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a28bc49e"],{1686:function(e,t,a){},"19c3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-grade-list"},[a("nav-bar",{attrs:{list:e.nav}}),a("br"),a("section",{staticClass:"content-container"},[a("section",{staticClass:"content-container bg-white"},[a("header",{staticClass:"member-grade-info"},[a("div",{staticClass:"name"},[e._v("\n              "+e._s(e.evaluation_name)+"\n        ")]),a("div",{staticClass:"finish_time"},[e._v("\n          截止时间: "+e._s(e.end_time)+"\n        ")])]),a("br"),a("hr"),a("br"),a("div",{staticClass:"members-list-filter"},[a("el-form",{ref:"ruleForm",staticClass:"list-filter-form",attrs:{inline:!0,model:e.memberForm}},[a("el-form-item",{attrs:{prop:"superior_name"}},[a("el-input",{attrs:{placeholder:"请输入下级姓名"},model:{value:e.memberForm.superior_name,callback:function(t){e.$set(e.memberForm,"superior_name",t)},expression:"memberForm.superior_name"}})],1),a("el-form-item",{attrs:{prop:"employee_name"}},[a("el-input",{attrs:{placeholder:"隔级姓名"},model:{value:e.memberForm.employee_name,callback:function(t){e.$set(e.memberForm,"employee_name",t)},expression:"memberForm.employee_name"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"上级评状态"},model:{value:e.memberForm.highlevel_status,callback:function(t){e.$set(e.memberForm,"highlevel_status",t)},expression:"memberForm.highlevel_status"}},e._l(e.constants.BREF_HIGH_LEVEL_STATUS,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1)],1),a("el-popover",{attrs:{placement:"top",width:"160"},on:{hide:function(t){e.reason=""}},model:{value:e.showReasonPop,callback:function(t){e.showReasonPop=t},expression:"showReasonPop"}},[a("case-area",{attrs:{placeholder:"请填写驳回理由"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}}),a("br"),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.batchReject}},[e._v("提交")])],1),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{slot:"reference",type:"primary",disabled:!e.hasSelectedItem,round:""},slot:"reference"},[e._v("批量驳回")])],1),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{disabled:!e.hasSelectedItem,type:"primary",round:""},on:{click:e.batchPass}},[e._v("批量通过")]),a("distribute-summary",{attrs:{data:e.summary}})],1),a("br"),a("hr",{staticClass:"dash"}),a("br"),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{attrs:{type:"flex",align:"middle"}},[t.row.avatar?a("img",{staticStyle:{"margin-right":"15px"},attrs:{width:"30px",height:"30px",src:t.row.avatar+"_30x30q100.jpg",alt:""}}):a("span",{staticClass:"stringAvatar"},[e._v(e._s(t.row.name.substr(t.row.name.length-2)))]),e._v("\n              "+e._s(t.row.name)+"\n            ")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"上级姓名"}}),a("el-table-column",{attrs:{prop:"score",label:"自评分数"}}),a("el-table-column",{attrs:{prop:"superior_score",label:"上级评分数"}}),a("el-table-column",{attrs:{prop:"_271_level",label:"271等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row._271_level?e.getLevelText(t.row._271_level):"无")+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"superior_status",label:"上级评状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.superior_status?"未评":"已评")+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.goDetail(t.row)}}},[e._v("查看详情")])]}}])})],1),a("br"),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("pagination",{attrs:{currentPage:e.currentPage,total:e.total},on:{"current-change":e.currentChange}})],1)],1)])],1)},r=[],s=a("38fb"),o=a("c9f1"),l=a("fea5");function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={data:function(){return{total:0,currentPage:1,evaluation_name:"",end_time:"",selectedArr:[],reason:"",showReasonPop:!1,tableData:[],summary:{top:{count:0,expected:0},middle:{count:0,expected:0},bottom:{count:0,expected:0}},memberForm:{superior_name:"",employee_name:"",highlevel_status:""},nav:[{label:s["J"],href:o["f"]},{label:s["Ec"],active:!0}],constants:{BREF_HIGH_LEVEL_STATUS:s["l"]}}},components:{"nav-bar":function(){return a.e("chunk-5a85c387").then(a.bind(null,"3208"))},pagination:function(){return a.e("chunk-84bbef5e").then(a.bind(null,"486f"))},"distribute-summary":function(){return a.e("chunk-15b53c39").then(a.bind(null,"4d4b"))},"case-area":function(){return a.e("chunk-463f71be").then(a.bind(null,"b5ec"))}},watch:{memberForm:{handler:function(e){this.currentPage=1,this.refreshData(i({page:1},e))},deep:!0,immediate:!0}},methods:{selectionChange:function(e){this.selectedArr=e.map(function(e){return e.id})},batchPass:function(){var e=this;this.$confirm("是否批量通过, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l["nb"])({ids:e.selectedArr,type:2}).then(function(t){e.$message({message:"操作成功",type:"success"}),e.refreshData(i({page:1},e.memberForm)),e.page=1,e.selectedArr=[]}).catch(function(e){})}).catch(function(){})},batchReject:function(){var e=this;this.reason?Object(l["nb"])({ids:this.selectedArr,type:1,reason:this.reason}).then(function(t){e.$message({message:"操作成功",type:"success"}),e.refreshData(i({page:1},e.memberForm)),e.page=1,e.showReasonPop=!1,e.selectedArr=[]}).catch(function(e){}):this.$message({message:"请填写驳回理由!",type:"warning"})},currentChange:function(e){this.refreshData(i({page:e},this.memberForm))},refreshData:function(e){var t=this;Object(l["m"])(this.$route.params.id,e).then(function(e){var a=e.total,n=e.data,r=e.overview,s=e.evaluation_name,o=e.end_time;t.total=a,t.tableData=n,t.evaluation_name=s,t.end_time=o,t.postSummary(r)})},goDetail:function(e){this.$router.push(Object(o["d"])(this.$route.params.id,e.id))},postSummary:function(e){var t={},a=!0,n=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value;t[l.key]={count:parseInt(l.count),expected:l.expected_value}}}catch(e){n=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}this.summary=i({},t)},getLevelText:function(e){return s["wc"][e]}},computed:{hasSelectedItem:function(){return this.selectedArr.length>0}}},m=u,p=(a("2670"),a("2877")),b=Object(p["a"])(m,n,r,!1,null,"30a526c9",null);b.options.__file="index.vue";t["default"]=b.exports},2670:function(e,t,a){"use strict";var n=a("1686"),r=a.n(n);r.a}}]);