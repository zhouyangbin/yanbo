(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14938675"],{2931:function(t,e,a){},2981:function(t,e,a){"use strict";var n=a("2931"),l=a.n(n);l.a},"2e88":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-bar",{attrs:{list:t.nav}}),a("section",{staticClass:"progress-header",attrs:{align:"center"}},[a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("p",[t._v(t._s(t.name))])]),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{disabled:!t.Allsubmit_action,type:"primary"},on:{click:t.Allsubmit_step1}},[t._v("整体提交")]),a("el-popover",{attrs:{placement:"bottom",width:"270",trigger:"click"}},[a("p",[t._v("提交记录")]),[a("el-table",{attrs:{data:t.reviewData,height:"250"}},[a("el-table-column",{attrs:{width:"100",property:"created_at",label:"日期"}}),a("el-table-column",{attrs:{width:"100",property:"name",label:"姓名"}}),a("el-table-column",{attrs:{width:"80",property:"type_text",label:"状态"}})],1)],a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference"},slot:"reference"},[t._v("查看审批记录")])],2)],1)],1),t.reject_msg?a("el-row",{staticClass:"overview_tip_color"},[a("el-col",{attrs:{span:2,align:"center"}},[a("p",[t._v("上级意见:")])]),a("el-col",{attrs:{span:22,align:"left"}},[a("p",[t._v(t._s(t.reject_msg))])])],1):t._e()],1),a("section",{staticClass:"content-container"},[a("team-tabel",{attrs:{overview:t.overview}}),a("section",{staticClass:"progress-header"},[a("el-row",{staticClass:"table-title",attrs:{gutter:20}},[a("el-col",{staticClass:"table-title-desc",attrs:{span:2.5}},[t._v("考核人员明细")]),a("el-col",{staticClass:"table-title-num",attrs:{span:15}},[t._v("共"+t._s(t.total)+"人")])],1),a("el-form",{ref:"filterForm",attrs:{inline:!0,model:t.filterForm}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.filterForm.name,callback:function(e){t.$set(t.filterForm,"name",e)},expression:"filterForm.name"}})],1),a("el-form-item",{attrs:{prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.filterForm.status,callback:function(e){t.$set(t.filterForm,"status",e)},expression:"filterForm.status"}},t._l(t.constants.ENUM_PERFORMANCE_FINISH,function(t){return a("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})}),1)],1),a("el-button",{on:{click:function(e){return t.resetForm("filterForm")}}},[t._v(t._s(t.constants.LABEL_EMPTY))])],1)],1),a("section",{staticStyle:{"min-height":"400px"}},[a("el-row",{attrs:{type:"flex",gutter:20,align:"top"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"","header-cell-style":{background:"#eef1f6"}}},[a("el-table-column",{attrs:{prop:"workcode",label:"工号"}}),a("el-table-column",{attrs:{prop:"name",label:t.constants.LABEL_NAME},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("span",[t._v(t._s(e.row.name))]),e.row.has_appeal?a("span",{staticClass:"appeal-tag"},[t._v("\n                    "+t._s(t.constants.APPEAL)+"\n                  ")]):t._e()])]}}])}),a("el-table-column",{attrs:{prop:"hr_name",label:"HRBP"}}),a("el-table-column",{attrs:{prop:"high_level_name",label:"隔级"}}),a("el-table-column",{attrs:{prop:"self_score",label:"自评分"}}),a("el-table-column",{attrs:{prop:"superior_score",label:"上级评分"}}),a("el-table-column",{attrs:{prop:"score_level",label:"绩效等级"}}),a("el-table-column",{attrs:{label:"标签分布",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["A"==e.row.score_level||"S"==e.row.score_level?a("el-tag",{staticClass:"status-tag top-style"},[a("span",{staticClass:"top-style-text"},[t._v(t._s(e.row.label_name))])]):t._e(),"B"==e.row.score_level?a("el-tag",{staticClass:"status-tag bplus-style"},[a("span",{staticClass:"bplus-style-text"},[t._v(t._s(e.row.label_name))])]):t._e(),"C"==e.row.score_level?a("el-tag",{staticClass:"status-tag other-style"},[a("span",{staticClass:"other-style-text"},[t._v(t._s(e.row.label_name))])]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"stage_status",label:"状态",align:"center"}}),a("el-table-column",{attrs:{prop:"ops",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.operate_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDetail(e.row)}}},[t._v("详情")]):t._e(),2==e.row.operate_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDetail(e.row)}}},[t._v("评分")]):t._e(),3==e.row.operate_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDetail(e.row)}}},[t._v("修改评分")]):t._e(),4==e.row.operate_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.goDetail(e.row)}}},[t._v("处理申诉")]):t._e()]}}])})],1),a("br"),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("pagination",{attrs:{currentPage:t.currentPage,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)],1)],1)],1)},l=[],s=(a("7f7f"),a("38fb")),r=a("c9f1"),o=a("372d"),c=a("fea5"),i={data:function(){return{total:0,currentPage:1,filterForm:{status:"",name:""},overview:[],nav:[{label:s["je"],href:r["k"]},{label:s["Kb"],active:!0}],tableData:[],constants:{DETAILS:s["V"],SELF_EVALUATION:s["Ud"],LABEL_NAME:s["lc"],LABEL_SUP:s["Bc"],OPERATIONS:s["qd"],APPEAL:s["g"],LABEL_EMPTY:s["fc"],PLS_SELECT:s["xd"],ENUM_PERFORMANCE_FINISH:s["rb"]},name:"",Allsubmit_action:!1,reject_msg:"",content:"",reviewData:[]}},components:{"nav-bar":function(){return a.e("chunk-d5094d72").then(a.bind(null,"3208"))},"team-tabel":Object(o["a"])(a.e("chunk-dd36ca28").then(a.bind(null,"16c1"))),pagination:function(){return a.e("chunk-28d9b0e5").then(a.bind(null,"486f"))}},created:function(){this.reviewList()},methods:{getUserInfo:function(t){var e=[];return t.map(function(t){e.push(t.name+"("+t.score_level+" "+t.superior_score+")")}),e.join(",")?e.join(","):"--"},resetForm:function(t){this.$refs[t].resetFields()},goDetail:function(t){this.$router.push(Object(r["l"])(this.$route.params.id,t.id))},refreshList:function(t){var e=this;return Object(c["Y"])(this.$route.params.id,t).then(function(t){var a=t.user,n=t.overview,l=t.performanceInfo;e.tableData=a.data||[],e.total=a.total||[],e.overview=n||[],e.name=l.name||"",e.Allsubmit_action=l.submit,e.reject_msg=l.reject_msg}).catch(function(t){})},reviewList:function(){var t=this;return Object(c["gb"])(this.$route.params.id).then(function(e){t.reviewData=e}).catch(function(t){})},handleCurrentChange:function(t){this.currentPage=t,this.refreshList({page:t,name:this.filterForm.name,stage:this.filterForm.status})},Allsubmit_step1:function(){var t=this;this.$createElement;this.$confirm("您已评完完成所有直属下级的评分, 请整体检查分布情况，并提交至隔级审核 ","提示",{confirmButtonText:"提交",callback:function(e){if("cancel"==e)return!1;var a=t.overview,n=a[0].expected-a[0].count,l=a[1].child[0].expected-a[1].child[0].count,s=a[1].child[1].expected-a[1].child[1].count,r=a[2].child[0].count-a[2].child[0].expected,o=a[2].child[1].count-a[2].child[1].expected;if(n>=0&&l>=0&&s>=0&&r>=0&&o>=0)t.Allsubmit_step3();else{var c="<p>不符合标签分布要求，如继续提交，将处罚邮件至一级部门负责人和HRBP，是否确认继续</p>                       <p>分布结果检查 :</p>                       <p style='".concat(n>=0?"display:none":null,"'> <span style='color: #EB0C00;margin-left:90px'>                        ").concat(a[0].name,"总人数超出").concat(Math.abs(n),"人</span></p>                       <p style='").concat(l>=0?"display:none":null,"'> <span style='color: #EB0C00;margin-left:90px'>                         ").concat(a[1].child[0].name,"总人数超出").concat(Math.abs(l),"人</span></p>                       <p style='").concat(s>=0?"display:none":null,"'> <span style='color: #EB0C00;margin-left:90px'>                        ").concat(a[1].child[1].name,"总人数超出").concat(Math.abs(s),"人</span></p>                       <p style='").concat(r>=0?"display:none":null,"'> <span style='color: #EB0C00;margin-left:90px'>                        ").concat(a[2].child[0].name,"总人数超出").concat(Math.abs(r),"人</span></p>                       <p style='").concat(o>=0?"display:none":null,"'> <span style='color: #EB0C00;margin-left:90px'>                        ").concat(a[2].child[1].name,"总人数超出").concat(Math.abs(o),"人</span></p>");t.Allsubmit_step2(c)}},cancelButtonText:"暂不提交"}).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(){})},Allsubmit_step2:function(t){var e=this;this.$prompt(t,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"提交",inputPlaceholder:"请输入理由",cancelButtonText:"暂不提交"}).then(function(t){var a=t.value;e.Allsubmit_send(a)}).catch(function(){})},Allsubmit_step3:function(){var t=this;this.$createElement;this.$confirm("<p>是否确认提交至隔级审核</p>                        <p>分布结果检查 : <span style='color: #EB0C00'> 全部符合23221分布比例要求</span></p>","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"提交",callback:function(t){},cancelButtonText:"暂不提交"}).then(function(){t.Allsubmit_send()}).catch(function(){})},Allsubmit_send:function(t){var e=this,a={content:t};return Object(c["fb"])(this.$route.params.id,a).then(function(t){e.$message({message:t,type:"success"})}).catch(function(t){})}},computed:{},watch:{filterForm:{handler:function(t){var e={name:t.name,stage:t.status,page:1};this.refreshList(e),this.currentPage=1},deep:!0,immediate:!0}}},u=i,p=(a("2981"),a("2877")),m=Object(p["a"])(u,n,l,!1,null,"b76adec2",null);e["default"]=m.exports},"372d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:!0,expression:"true",modifiers:{lock:!0}}],staticClass:"my-loading",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}})},l=[],s={},r=s,o=(a("ee47"),a("2877")),c=Object(o["a"])(r,n,l,!1,null,"6c517b7e",null),i=c.exports;a.d(e,"a",function(){return u});var u=function(t){return function(){return{component:t,loading:i,delay:0}}}},"9f9e":function(t,e,a){},ee47:function(t,e,a){"use strict";var n=a("9f9e"),l=a.n(n);l.a}}]);