{"version":3,"sources":["webpack:///src/components/common/TreeSelectPanel/index.vue","webpack:///./src/components/common/TreeSelectPanel/index.vue?46d0","webpack:///./src/components/common/TreeSelectPanel/index.vue","webpack:///src/components/modules/usermanage/BindDP/index.vue","webpack:///./src/components/modules/usermanage/BindDP/index.vue?f4a4","webpack:///./src/components/modules/usermanage/BindDP/index.vue"],"names":["TreeSelectPanel","Boolean","Array","data","getCheckedNodes","id","rootID","enableAll","$emit","nodes","map","_ref","index","currentRoot","children","tree","_this","this","disabled","node","val","v","department_id","name","warn","concat","binding","expression","compName","bubble","e","handler","__vueClickOutside__","render","_vm","_h","$createElement","_c","_self","attrs","on","before-leave","beforeLeave","after-enter","afterEnter","directives","rawName","value","staticClass","placeholder","model","callback","$$v","filterText","ref","empty-text","props","defaultProps","default-checked-keys","checkedKeys","node-key","filter-node-method","filterNode","show-checkbox","treeOps","check-change","treeChange","_e","staticRenderFns","injectStyle","context","__webpack_require__","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","Object","component_normalizer","__webpack_exports__","BindDP","MODIFY","TEXT","CONFIRM","CANCEL","resetFields","_this2","close","_this3","API","then","res","cultureDepartment","achievementDepartmentTree","catch","width","visible","slot","_v","_s","constants","inline","rules","bindRules","bindForm","currentInfo","prop","label","staticStyle","icon","readonly","nativeOn","click","$event","showPerformanceTree","showCultureTree","cultrueSelectedNames","performanceSelectedNames","type","justify","round","size","submit","key","checkedNodes","cultureCheckedNodes","cultureDepartmentTree","update:checkedNodes","update:visible","performanceCheckedNodes","performanceDepartmentTree"],"mappings":"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","file":"js/42.3f9183c6.js","sourcesContent":["<template>\n  <transition @before-leave=\"beforeLeave\" @after-enter=\"afterEnter\" name=\"fade\">\n    <div v-click-outside=\"outside\" class=\"objectTree-container\" v-if=\"visible\">\n      <el-input placeholder=\"输入关键字进行过滤\" v-model=\"filterText\">\n      </el-input>\n      <el-tree empty-text=\"努力加载中...\" @check-change=\"treeChange\" :props=\"defaultProps\" :default-checked-keys=\"checkedKeys\" node-key=\"id\" ref=\"tree\" :filter-node-method=\"filterNode\" show-checkbox :data=\"treeOps\">\n      </el-tree>\n    </div>\n  </transition>\n</template>\n<script>\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    data: {\n      type: Array,\n      default: () => []\n    },\n    checkedNodes: {\n      type: Array,\n      default: () => []\n    },\n    exclusive: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      defaultProps: { label: \"name\" },\n      filterText: \"\",\n      tree: this.data\n    };\n  },\n  methods: {\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.name.indexOf(value) !== -1;\n    },\n    afterEnter(el) {\n      el.style.width = \"30%\";\n    },\n    beforeLeave(el) {\n      el.style.width = \"0px\";\n      el.style.padding = \"0px\";\n    },\n    treeChange(data, checked, indeterminate) {\n      const nodes = this.$refs.tree.getCheckedNodes();\n      if (this.exclusive) {\n        if (checked) {\n          const rootID = this.findRoot(data.id).id;\n          // console.log(rootID)\n          this.disabledOtherBranch(rootID);\n        }\n\n        if (nodes.length == 0) {\n          this.enableAll();\n        }\n      }\n\n      // console.log(nodes)\n      this.$emit(\n        \"update:checkedNodes\",\n        nodes.map(({ name, id }) => ({ name, department_id: id }))\n      );\n    },\n    findRoot(id) {\n      // console.log(\"find id\", id)\n      let currentRoot = {};\n      for (let index = 0; index < this.data.length; index++) {\n        currentRoot = this.data[index];\n        // console.log(\"currentRoot\", currentRoot)\n        if (this.findNode(id, this.data[index])) {\n          return currentRoot;\n        }\n      }\n    },\n    findNode(id, node) {\n      if (node.id == id) {\n        return true;\n      }\n      const children = node.children;\n      if (children && children.length > 0) {\n        for (let index = 0; index < children.length; index++) {\n          if (this.findNode(id, children[index])) {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n    disabledOtherBranch(id) {\n      let tree = this.tree;\n      for (let index = 0; index < tree.length; index++) {\n        if (tree[index].id == id) {\n          // console.log(id, tree[index], \"will continue\")\n          continue;\n        }\n        tree[index] = this.disableNode(tree[index], true);\n        this.$set(tree, index, { ...tree[index] });\n      }\n      // this.$emit(\"update:data\", tree)\n      // this.tree = tree.slice()\n\n      // this.$forceUpdate()\n    },\n    disableNode(node, disabled) {\n      node.disabled = disabled;\n      const children = node.children;\n      if (children && children.length > 0) {\n        node.children = children.map(c => {\n          return this.disableNode(c, disabled);\n        });\n      }\n      return node;\n    },\n    enableAll() {\n      let tree = this.tree;\n      for (let index = 0; index < tree.length; index++) {\n        tree[index] = this.disableNode(tree[index], false);\n        this.$set(tree, index, { ...tree[index] });\n      }\n      // this.da = tree\n      // this.$emit(\"update:data\", tree)\n      // this.$forceUpdate()\n    },\n    outside() {\n      this.$emit(\"update:visible\", false);\n    }\n  },\n  watch: {\n    filterText(val) {\n      this.$refs.tree.filter(val);\n    },\n    data(v) {\n      this.tree = v;\n    }\n  },\n  computed: {\n    checkedKeys() {\n      return this.checkedNodes.map(({ department_id }) => department_id);\n    },\n    treeOps() {\n      return this.tree || this.data;\n    }\n  },\n  directives: {\n    \"click-outside\": {\n      bind: function(el, binding, vNode) {\n        // Provided expression must evaluate to a function.\n        if (typeof binding.value !== \"function\") {\n          const compName = vNode.context.name;\n          let warn = `[Vue-click-outside:] provided expression '${\n            binding.expression\n          }' is not a function, but has to be`;\n          if (compName) {\n            warn += `Found in component '${compName}'`;\n          }\n\n          console.warn(warn);\n        }\n        // Define Handler and cache it on the element\n        const bubble = binding.modifiers.bubble;\n        const handler = e => {\n          if (bubble || (!el.contains(e.target) && el !== e.target)) {\n            binding.value(e);\n          }\n        };\n        el.__vueClickOutside__ = handler;\n\n        // add Event Listeners\n        document.addEventListener(\"click\", handler);\n      },\n\n      unbind: function(el, binding) {\n        // Remove Event Listeners\n        document.removeEventListener(\"click\", el.__vueClickOutside__);\n        el.__vueClickOutside__ = null;\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.objectTree-container {\n  position: fixed;\n  overflow: auto;\n  right: 0;\n  top: 0;\n  z-index: 100;\n  background: rgba(242, 247, 249, 0.9);\n  padding: 60px 20px 20px 20px;\n  height: 100%;\n  box-sizing: border-box;\n  transition: all 1s;\n  opacity: 1;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: all 1s;\n  width: 30%;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n  width: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/TreeSelectPanel/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"},on:{\"before-leave\":_vm.beforeLeave,\"after-enter\":_vm.afterEnter}},[(_vm.visible)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.outside),expression:\"outside\"}],staticClass:\"objectTree-container\"},[_c('el-input',{attrs:{\"placeholder\":\"输入关键字进行过滤\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}}),_c('el-tree',{ref:\"tree\",attrs:{\"empty-text\":\"努力加载中...\",\"props\":_vm.defaultProps,\"default-checked-keys\":_vm.checkedKeys,\"node-key\":\"id\",\"filter-node-method\":_vm.filterNode,\"show-checkbox\":\"\",\"data\":_vm.treeOps},on:{\"check-change\":_vm.treeChange}})],1):_vm._e()])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23313069\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/TreeSelectPanel/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23313069\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vincent/Documents/Working/FE-PC-TDC/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vincent/Documents/Working/FE-PC-TDC/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23313069\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-23313069\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/TreeSelectPanel/index.vue\n// module id = null\n// module chunks = ","<template>\n  <el-dialog @close=\"close\" width=\"650px\" :visible=\"visible\" class=\"bindDPDialog\">\n    <div slot=\"title\" class=\"title\">\n      {{constants.MODIFY}}\n    </div>\n    <div>\n    </div>\n    <el-form :inline=\"true\" :rules=\"bindRules\" ref=\"bindForm\" :model=\"bindForm\" class=\"bindForm\">\n      <el-form-item v-if=\"currentInfo.has_culture_permission\" prop=\"culture\" label=\"文化范围\">\n        <el-input style=\"width:400px\" placeholder=\"请选择事业部\" v-model=\"cultrueSelectedNames\" icon=\"caret-bottom\" readonly=\"readonly\" @click.native=\"showPerformanceTree=false;showCultureTree = !showCultureTree\">\n        </el-input>\n      </el-form-item>\n      <el-form-item v-if=\"currentInfo.has_achievement_permission\" prop=\"performance\" label=\"绩效范围\">\n        <el-input style=\"width:400px\" placeholder=\"请选择事业部\" v-model=\"performanceSelectedNames\" icon=\"caret-bottom\" readonly=\"readonly\" @click.native=\"showCultureTree=false;showPerformanceTree = !showPerformanceTree\">\n        </el-input>\n      </el-form-item>\n    </el-form>\n    <div slot=\"footer\">\n      <el-row type=\"flex\" justify=\"center\">\n        <el-button round size=\"medium\" @click=\"submit('bindForm')\" type=\"primary\">{{constants.CONFIRM}}</el-button>\n        <el-button round size=\"medium\" @click=\"close\" class=\"btn-reset\">{{constants.CANCEL}}</el-button>\n      </el-row>\n    </div>\n    <dp-panel v-if=\"showCultureTree\" key=\"showCultureTree\" :checkedNodes.sync=\"cultureCheckedNodes\" :visible.sync=\"showCultureTree\" :data=\"cultureDepartmentTree\"></dp-panel>\n    <dp-panel v-if=\"showPerformanceTree\" key=\"showPerformanceTree\" :checkedNodes.sync=\"performanceCheckedNodes\" :visible.sync=\"showPerformanceTree\" :data=\"performanceDepartmentTree\"></dp-panel>\n  </el-dialog>\n</template>\n<script>\nimport { MODIFY, CONFIRM, CANCEL } from \"@/constants/TEXT\";\nimport TreeSelectPanel from \"@/components/common/TreeSelectPanel/index.vue\";\nimport { getAccessTree, patchUserScope } from \"@/constants/API\";\n\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    currentInfo: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data() {\n    const cultureTreeValidator = (rule, value, callback) => {\n      if (this.cultureCheckedNodes.length == 0) {\n        callback(\"请选择文化管理范围\");\n      } else {\n        callback();\n      }\n    };\n    const performanceTreeValidator = (rule, value, callback) => {\n      if (this.performanceCheckedNodes.length == 0) {\n        callback(\"请选择绩效管理范围\");\n      } else {\n        callback();\n      }\n    };\n    return {\n      // show: true,\n      showCultureTree: false,\n      cultureCheckedNodes: this.currentInfo.culture_departments || [],\n      showPerformanceTree: false,\n      performanceCheckedNodes: this.currentInfo.achievement_departments || [],\n      cultureDepartmentTree: [],\n      performanceDepartmentTree: [],\n      filterText: \"\",\n      constants: {\n        MODIFY,\n        CONFIRM,\n        CANCEL\n      },\n      bindRules: {\n        culture: [{ validator: cultureTreeValidator, trigger: \"change\" }],\n        performance: [\n          { validator: performanceTreeValidator, trigger: \"change\" }\n        ]\n      },\n      bindForm: {\n        culture: \"\",\n        performance: \"\"\n      }\n    };\n  },\n  beforeDestroy() {\n    this.$refs[\"bindForm\"].resetFields();\n  },\n  components: {\n    \"dp-panel\": TreeSelectPanel\n  },\n  computed: {\n    cultrueSelectedNames() {\n      return this.cultureCheckedNodes.map(({ name }) => name).join(\", \");\n    },\n    performanceSelectedNames() {\n      return this.performanceCheckedNodes.map(({ name }) => name).join(\", \");\n    }\n  },\n  methods: {\n    submit(form) {\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          const params = {\n            culture_department_ids: this.cultureCheckedNodes.map(\n              v => v.department_id\n            ),\n            achievement_department_ids: this.performanceCheckedNodes.map(\n              v => v.department_id\n            )\n          };\n          // console.log(this.currentInfo)\n          patchUserScope(this.currentInfo.id, params).then(res => {\n            // console.log(res);\n            this.close();\n          });\n        }\n      });\n    },\n    close() {\n      this.$emit(\"update:visible\", false);\n    }\n  },\n  created() {\n    getAccessTree()\n      .then(res => {\n        const { cultureDepartment, achievementDepartmentTree } = res;\n        this.cultureDepartmentTree = cultureDepartment\n          ? [cultureDepartment]\n          : [];\n        this.performanceDepartmentTree = achievementDepartmentTree\n          ? [achievementDepartmentTree]\n          : [];\n      })\n      .catch(e => {});\n  }\n};\n</script>\n<style scoped>\n.bindDPDialog .title {\n  text-align: center;\n  font-weight: 700;\n  font-size: 18px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/modules/usermanage/BindDP/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"bindDPDialog\",attrs:{\"width\":\"650px\",\"visible\":_vm.visible},on:{\"close\":_vm.close}},[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"\\n    \"+_vm._s(_vm.constants.MODIFY)+\"\\n  \")]),_c('div'),_c('el-form',{ref:\"bindForm\",staticClass:\"bindForm\",attrs:{\"inline\":true,\"rules\":_vm.bindRules,\"model\":_vm.bindForm}},[(_vm.currentInfo.has_culture_permission)?_c('el-form-item',{attrs:{\"prop\":\"culture\",\"label\":\"文化范围\"}},[_c('el-input',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请选择事业部\",\"icon\":\"caret-bottom\",\"readonly\":\"readonly\"},nativeOn:{\"click\":function($event){_vm.showPerformanceTree=false;_vm.showCultureTree = !_vm.showCultureTree}},model:{value:(_vm.cultrueSelectedNames),callback:function ($$v) {_vm.cultrueSelectedNames=$$v},expression:\"cultrueSelectedNames\"}})],1):_vm._e(),(_vm.currentInfo.has_achievement_permission)?_c('el-form-item',{attrs:{\"prop\":\"performance\",\"label\":\"绩效范围\"}},[_c('el-input',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请选择事业部\",\"icon\":\"caret-bottom\",\"readonly\":\"readonly\"},nativeOn:{\"click\":function($event){_vm.showCultureTree=false;_vm.showPerformanceTree = !_vm.showPerformanceTree}},model:{value:(_vm.performanceSelectedNames),callback:function ($$v) {_vm.performanceSelectedNames=$$v},expression:\"performanceSelectedNames\"}})],1):_vm._e()],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-button',{attrs:{\"round\":\"\",\"size\":\"medium\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.submit('bindForm')}}},[_vm._v(_vm._s(_vm.constants.CONFIRM))]),_c('el-button',{staticClass:\"btn-reset\",attrs:{\"round\":\"\",\"size\":\"medium\"},on:{\"click\":_vm.close}},[_vm._v(_vm._s(_vm.constants.CANCEL))])],1)],1),(_vm.showCultureTree)?_c('dp-panel',{key:\"showCultureTree\",attrs:{\"checkedNodes\":_vm.cultureCheckedNodes,\"visible\":_vm.showCultureTree,\"data\":_vm.cultureDepartmentTree},on:{\"update:checkedNodes\":function($event){_vm.cultureCheckedNodes=$event},\"update:visible\":function($event){_vm.showCultureTree=$event}}}):_vm._e(),(_vm.showPerformanceTree)?_c('dp-panel',{key:\"showPerformanceTree\",attrs:{\"checkedNodes\":_vm.performanceCheckedNodes,\"visible\":_vm.showPerformanceTree,\"data\":_vm.performanceDepartmentTree},on:{\"update:checkedNodes\":function($event){_vm.performanceCheckedNodes=$event},\"update:visible\":function($event){_vm.showPerformanceTree=$event}}}):_vm._e()],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fc7d1db4\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/modules/usermanage/BindDP/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fc7d1db4\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vincent/Documents/Working/FE-PC-TDC/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/vincent/Documents/Working/FE-PC-TDC/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fc7d1db4\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fc7d1db4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/modules/usermanage/BindDP/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}