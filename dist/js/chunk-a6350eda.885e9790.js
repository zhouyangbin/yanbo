(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6350eda"],{"1cd6":function(e,t,n){},"67f9":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"down-member-details-page"},[n("nav-bar",{attrs:{list:e.nav}}),n("br"),n("section",{staticClass:"content-container",staticStyle:{padding:"40px"}},[n("basic-info",{attrs:{data:e.basicInfo}}),n("br"),n("hr"),n("br"),n("rule-text",{attrs:{text:e.constants.MY_DOWN_MEMBER_RULE}}),n("br"),n("br"),n("div",[n("h3",[e._v(e._s(e.constants.ADVANTAGE)+":")]),n("case-area",{attrs:{readOnly:!0},model:{value:e.advantage,callback:function(t){e.advantage=t},expression:"advantage"}})],1),n("br"),n("div",[n("h3",[e._v(e._s(e.constants.PROMOTION)+":")]),n("case-area",{attrs:{readOnly:!0},model:{value:e.promotion,callback:function(t){e.promotion=t},expression:"promotion"}})],1),n("br"),e._l(e.rejectReasons,function(e,t){return n("div",{key:t},[n("reject-reason",{attrs:{data:e.reason}}),n("br")],1)}),n("el-row",{staticClass:"mark-section",attrs:{align:"middle",type:"flex"}},[n("el-col",{staticStyle:{"border-right":"1px solid #979797"}},[n("div",{staticClass:"mark-label"},[e._v("\n          "+e._s(e.constants.LEADER_SOCRE)+": "),n("span",{staticClass:"score"},[e._v(e._s(e.total)+"分")])]),n("grade-items",{attrs:{items:e.scores},model:{value:e.selectGradeItem,callback:function(t){e.selectGradeItem=t},expression:"selectGradeItem"}}),n("br"),n("br"),n("div",{staticClass:"mark-label"},[e._v("\n          等级标签\n        ")]),n("level-selector",{attrs:{disabled:!e.levelEditable},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},[e.readOnly?e._e():n("span",[e.levelEditable?n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",round:""},on:{click:e.levelChange}},[e._v(e._s(e.constants.CONFIRM))]):n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",round:""},on:{click:function(t){e.levelEditable=!0}}},[e._v(e._s(e.constants.LABEL_MODIFY))])],1)]),n("br")],1),n("br"),n("el-col",{staticStyle:{"padding-left":"50px"}},[n("div",{staticClass:"mark-reason"},[n("div",[e._v("\n            上级评理由:\n          ")]),n("div",[e._v("\n            "+e._s(e.leaderReason)+"\n          ")])]),n("br"),n("div",[e._v("\n          员工自评分数: "+e._s(e.selfTotal)+"分, "+e._s(e.curItemName)+": "+e._s(e.selfScore)+"分\n        ")]),e._l(e.selfCases,function(t,s){return n("div",{key:s,staticClass:"mark-reason"},[n("div",[e._v("\n            "+e._s(s+3)+"分理由:\n          ")]),n("div",[e._v("\n            "+e._s(t)+"\n          ")])])})],2)],1),n("br"),n("br"),e._l(e.appealReason,function(e,t){return n("div",{key:""+t+e.time},[n("appeal-reaosn",{attrs:{data:e}})],1)}),n("br"),n("br"),e.readOnly||e.isRejected?e._e():n("el-row",{attrs:{type:"flex",justify:"end"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showRejectDialog=!0}}},[e._v(e._s(e.constants.REJECT))]),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.pass}},[e._v(e._s(e.constants.CONFIRM))])],1)],2),e.showRejectDialog?n("reject-dialog",{attrs:{visible:e.showRejectDialog},on:{"update:visible":function(t){e.showRejectDialog=t}}}):e._e()],1)},a=[],r=(n("cadf"),n("551c"),n("097d"),n("38fb")),c=n("c9f1"),i=n("fea5"),o={data:function(){return{levelEditable:!1,showRejectDialog:!1,advantage:"",promotion:"",rejectReasons:[],levelNecessary:!1,basicInfo:{},reject_reason:[],appealReason:[],audit_status:0,scores:[{cases:[]}],total:"",nav:[{label:r["R"],href:c["f"]},{label:r["Qc"],href:Object(c["e"])(this.$route.params.id)},{label:"隔级详情",active:!0}],level:"",readOnly:!1,selectGradeItem:0,gradeItems:[],constants:{MY_DOWN_MEMBER_RULE:r["Rc"],LABEL_MODIFY:r["cc"],CONFIRM:r["x"],SUBMIT:r["Qd"],REJECT:r["wd"],LEADER_SOCRE:r["Dc"],ADVANTAGE:r["d"],PROMOTION:r["ud"]}}},components:{"nav-bar":function(){return n.e("chunk-5a85c387").then(n.bind(null,"3208"))},"basic-info":function(){return n.e("chunk-09165fb0").then(n.bind(null,"eb39"))},"rule-text":function(){return n.e("chunk-f91b1ecc").then(n.bind(null,"6c37"))},"case-area":function(){return n.e("chunk-463f71be").then(n.bind(null,"b5ec"))},"grade-items":function(){return n.e("chunk-d2a305a8").then(n.bind(null,"da3f"))},"level-selector":function(){return n.e("chunk-04bd9d4f").then(n.bind(null,"7f4e"))},"appeal-reaosn":function(){return n.e("chunk-6c870a38").then(n.bind(null,"f7ec"))},"reject-reason":function(){return n.e("chunk-4cbe6273").then(n.bind(null,"f269"))},"reject-dialog":function(){return n.e("chunk-0e57fc52").then(n.bind(null,"0ebc"))}},methods:{getDetailInfo:function(){var e=this;Object(i["A"])(this.$route.params.uid).then(function(t){var n,s=t.advantage,a=t.promotion,c=t.superior_name,i=t.superior_workcode,o=t.employee_workcode,l=t.employee_name,u=t.end_time,d=t.scores,f=t._271_level,_=t.total_score,b=t.audit_status,p=t._271_is_necessary,v=(t.stage,t.appeal_record),h=t.reject_record,m=t.break_status,g=t.highlevel_start_time;e.advantage=s,e.promotion=a,e.levelNecessary=!!p,e.appealReason=v||[],e.rejectReasons=h||[],n=0==m?new Date<=new Date(g)?"未开始":"":r["p"][m],e.basicInfo={name:l,superior_workcode:i,breakStatus:n,workcode:o,leaderLabel:"他的上级",superior_name:c,finishedTime:"隔级评截止时间: ".concat(u)},e.scores=d.map(function(e){return e.score=e.superior_score,delete e.superior_score,e}),e.total=_,e.audit_status=b,e.level=r["Hc"][f].toLowerCase(),e.readOnly=0==t.can_submit})},levelChange:function(){var e=this;!this.levelNecessary||this.level?Object(i["Bb"])({id:this.$route.params.uid,level:r["Gc"][this.level]}).then(function(t){e.$message({message:"等级设置成功!",type:"success"}),e.levelEditable=!1}).catch(function(e){}):this.$message({message:"请选择等级!",type:"warning"})},pass:function(){var e=this;this.$confirm("确认通过此评分么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.reqPass()}).catch(function(){})},reqPass:function(){var e=this;Object(i["nb"])({ids:[this.$route.params.uid],type:2}).then(function(t){e.$message({message:"操作成功!",type:"success"}),e.$router.back()}).catch(function(e){})}},created:function(){this.getDetailInfo()},computed:{leaderReason:function(){return this.scores[this.selectGradeItem].superior_case},selfCases:function(){return this.scores[this.selectGradeItem].self_cases},selfScore:function(){return this.scores[this.selectGradeItem].self_score},curItemName:function(){return this.scores[this.selectGradeItem].question_name},isRejected:function(){return 1==this.audit_status},isPassed:function(){return 2==this.audit_status},isUnTouched:function(){return 0==this.audit_status},selfTotal:function(){return this.scores.map(function(e){return e.self_score?parseFloat(e.self_score):0}).reduce(function(e,t){return e+t},0)}}},l=o,u=(n("e79a"),n("2877")),d=Object(u["a"])(l,s,a,!1,null,"9bcceff2",null);d.options.__file="index.vue";t["default"]=d.exports},e79a:function(e,t,n){"use strict";var s=n("1cd6"),a=n.n(s);a.a}}]);